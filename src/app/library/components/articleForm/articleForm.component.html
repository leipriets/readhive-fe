<form nz-form [formGroup]="form" (ngSubmit)="onSubmit()">
  <app-backend-error-messages
    *ngIf="errors"
    [backendErrors]="errors"
  ></app-backend-error-messages>

  <!-- Title -->
  <div nz-row>
    <div nz-col class="gutter-row" nzXs="6">
      <nz-form-item>
        <nz-form-label
          nzFor="title"
          nzRequired
          nzTooltipTitle="What is your article title?"
        >
          <span>Title</span>
        </nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col nzXs="14">
      <nz-form-item>
        <nz-form-control nzErrorTip="">
          <input
            nz-input
            id="title"
            formControlName="title"
            placeholder="Article title"
          />
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>

  <!-- About -->
  <div nz-row>
    <div nz-col class="gutter-row" nzXs="6">
      <nz-form-item>
        <nz-form-label
          nzFor="description"
          nzRequired
          nzTooltipTitle="What is your article about?"
        >
          <span>About</span>
        </nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col nzXs="14">
      <nz-form-item>
        <nz-form-control nzErrorTip="">
          <input
            nz-input
            id="description"
            formControlName="description"
            placeholder="Article about"
          />
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
  
  <!-- Tags-->

  <div nz-row>
    <div
      nz-col
      class="gutter-row"
      nzXs="6"
      nzSm="6"
    >
      <nz-form-item>
        <nz-form-label
          nzFor="tagList"
          nzRequired
          nzTooltipTitle="Enter your article tags, e.g: news"
        >
          <span>Tags</span>
        </nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col nzXs="14" nzSm="14">
      <nz-form-control nzErrorTip="">
        <nz-select nzMode="tags" nzPlaceHolder="Tags" formControlName="tagList">
          <ng-container *ngIf="data$ | async as data">
            @for (popularTag of data.popularTags; track $index) {
            <nz-option
              [nzLabel]="popularTag"
              [nzValue]="popularTag"
            ></nz-option>
            }
          </ng-container>
        </nz-select>
      </nz-form-control>
    </div>
  </div>

  <div nz-row nzXs="6" nzSm="6">
    <div nz-col class="gutter-row">
      <nz-form-item>
        <nz-form-label
          nzFor="body"
          nzRequired
          nzTooltipTitle="Content of your article?"
        >
          <span>Body</span>
        </nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col nzXs="24">
      <nz-form-control>
        <div class="ql-container">
          <div class="ql-editor">
            <quill-editor
              class="editor"
              formControlName="body"
              placeholder="Write your article (in markdown)"
            ></quill-editor>
          </div>
        </div>
      </nz-form-control>
    </div>
  </div>

  <!-- <nz-form-item>
    <nz-form-label
      [nzSm]="6"
      [nzXs]="24"
      nzFor="Image upload"
      nzTooltipTitle="You can upload photos for your article"
    >
      <span>Image upload</span>
    </nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="">
      <nz-upload
        [nzAction]="fakeUploadAction"
        [nzFileList]="fileList"
        nzListType="picture-card"
        [nzShowButton]="true"
        [nzMultiple]="true"
        [nzLimit]="4"
        [nzBeforeUpload]="beforeUpload"
        [nzPreview]="handlePreview"
        (nzChange)="handleChange($event)"
      >
        <div>
          <span nz-icon nzType="upload"></span>
          <div style="margin-top: 8px">Upload</div>
        </div>
      </nz-upload>
    </nz-form-control>
  </nz-form-item> -->

  <br />

  <div nz-row>
    <nz-form-item nz-row class="register-area">
      <nz-form-control [nzOffset]="5">
        <button
          type="submit"
          nz-button
          nzType="primary"
          [disabled]="form.invalid || isSubmitting"
        >
          Publish Article
        </button>
      </nz-form-control>
    </nz-form-item>
  </div>
</form>

<nz-modal
  [nzVisible]="previewVisible"
  [nzContent]="modalContent"
  [nzFooter]="null"
  (nzOnCancel)="previewVisible = false"
>
  <ng-template #modalContent>
    <img [src]="previewImage" style="width: 100%" />
  </ng-template>
</nz-modal>
