<nz-header nzTheme="dark">
  <div>
    <a routerLink="/global-feed" [queryParams]="{tab: 'globalFeed'}">
      <h3 class="banner-title">ReadHive</h3>
    </a>
  </div>
  <div nz-flex [nzJustify]="'flex-end'" [nzAlign]="'flex-end'">
    <ng-container *ngIf="data$ | async as data">
      <ul
        nz-menu
        nzMode="horizontal"
        nzTheme="dark"
        class="header-menu pull-right"
      >
        <li *ngIf="data.currentUser" nz-menu-item [nzMatchRouter]="true">
          <a
            nz-button
            nzType="text"
            nzPlacement="bottomRight"
            [routerLink]="['notification', data.currentUser.username]"
          >
            <nz-badge nzSize="small" [nzCount]="data?.notif_count?.count">
              <span nz-icon nzType="bell"></span>
            </nz-badge>
          </a>
        </li>

        <li *ngIf="!data.currentUser" nz-menu-item routerLink="/sp/login">
          Sign in
        </li>
      </ul>
      <ul
        class="header-menu pull-right no-hover"
        nz-menu
        nzMode="horizontal"
        nzTheme="dark"
        [nzSelectable]="false"
        [ngClass]="{'ant-menu-horizontal': false}"
        *ngIf="data.currentUser"
      >
        <li nz-menu-item>
          <span
            class="pull-right no-hover"
            nz-dropdown
            nzTrigger="click"
            [nzDropdownMenu]="menu"
            [nzPlacement]="'bottomRight'"
          >
            <nz-avatar
              nzSize="small"
              [nzSrc]="data.currentUser.image"
              nzIcon="user"
            ></nz-avatar>
        </span>

          <nz-dropdown-menu #menu="nzDropdownMenu">
            <ul nz-menu>
              <li nz-menu-item routerLink="/settings">
                <span nz-icon nzType="setting"></span>&nbsp;Edit Profile
              </li>
              <li nz-menu-divider></li>
              <li nz-menu-item (click)="logout()" nzDanger>
                <span nz-icon nzType="logout"></span>
                Logout
              </li>
            </ul>
          </nz-dropdown-menu>
        </li>
      </ul>
    </ng-container>
  </div>
</nz-header>
