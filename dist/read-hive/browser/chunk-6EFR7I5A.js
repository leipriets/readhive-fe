import{a as ke,b as Pe,c as Ee,d as Fe,e as ie}from"./chunk-XR7P7CG6.js";import{a as E,b as He,c as $e,d as Ue,e as je,f as Qe,g as Ge,h as We,i as Je,j as Ke,k as Xe,l as Ye,m as Ze,n as et,o as tt,p as it,q as nt,r as ct,s as mt}from"./chunk-SXY5WHVC.js";import{a as Le,b as Ve}from"./chunk-Z4BHWU3Z.js";import{c as te}from"./chunk-VXXMYUI5.js";import{a as Ie,b as De,h as at,i as lt}from"./chunk-PENA6MT2.js";import{j as M,m as Oe,n as F,o as ne,p as Be,q as L,s as qe}from"./chunk-HH3R6S3A.js";import{e as rt,f as ot}from"./chunk-HWWCGZV4.js";import{a as Te,b as Ae,c as Ne,d as Me}from"./chunk-OWTQ6K3K.js";import{a as W,b as J,c as K}from"./chunk-VPV7UKSS.js";import{a as Re}from"./chunk-456HDTCV.js";import{E as Se,F as we,U as P,s as xe,t as ye}from"./chunk-GN2DYACI.js";import{Ka as N,La as G,Ma as be,Nb as X,Ob as Y,Pb as Z,Rb as ee,fa as Q,ga as k,j as he,m as D,o as Ce,p as ve}from"./chunk-KYAOKWVV.js";import{$b as b,Ac as _,Bc as z,E as $,Gb as s,Ia as h,Ja as C,Kb as a,Mb as pe,Tb as de,Vb as ue,Wb as ge,Xb as r,Yb as o,Zb as p,_b as v,_c as j,bc as x,dc as f,fc as d,id as _e,jd as w,kc as V,lb as se,lc as O,mc as B,md as T,nc as fe,nd as ze,oc as m,pb as l,pc as U,qb as u,qc as q,qd as A,ra as me,u as H,v as I,wa as y,wc as S,xc as R,yc as re}from"./chunk-DZ3RKEIN.js";var gt=()=>({tab:"feed"}),ft=()=>({tab:"globalFeed"}),_t=t=>["/tags",t],zt=t=>({tab:t});function ht(t,c){t&1&&(r(0,"a",5),m(1,"Following "),o()),t&2&&a("queryParams",R(1,gt))}function Ct(t,c){t&1&&(v(0),r(1,"nz-tab"),s(2,ht,2,2,"a",4),o(),b())}function vt(t,c){t&1&&(r(0,"a",6),m(1,"For you "),o()),t&2&&a("queryParams",R(1,ft))}function bt(t,c){if(t&1&&(r(0,"a",9),p(1,"span",10),m(2),o()),t&2){let e=d(2);a("routerLink",re(3,_t,e.tagName))("queryParams",re(5,zt,e.tagName)),l(2),q("\xA0",e.tagName," ")}}function xt(t,c){t&1&&(r(0,"nz-tab",7),s(1,bt,3,7,"a",8),o())}var st=(()=>{class t{constructor(e,i,n){this.store=e,this.router=i,this.location=n,this.tagName="",this.currentUser$=this.store.select(P)}newTab(){}closeTab(){this.router.navigate(["global-feed"],{queryParams:{tab:"globalFeed"},queryParamsHandling:"merge"})}onBack(){this.location.back()}static{this.\u0275fac=function(i){return new(i||t)(u(N),u(Ce),u(j))}}static{this.\u0275cmp=y({type:t,selectors:[["app-feed-toggler"]],inputs:{tagName:"tagName"},standalone:!0,features:[S],decls:7,vars:4,consts:[["nzHideAdd","","nzType","editable-card","nzLinkRouter","",3,"nzAdd","nzClose"],[4,"ngIf"],["nz-tab-link","","routerLink","/global-feed",3,"queryParams",4,"nzTabLink"],["nzClosable","",4,"ngIf"],["nz-tab-link","","routerLink","/feed",3,"queryParams",4,"nzTabLink"],["nz-tab-link","","routerLink","/feed",3,"queryParams"],["nz-tab-link","","routerLink","/global-feed",3,"queryParams"],["nzClosable",""],["nz-tab-link","",3,"routerLink","queryParams",4,"nzTabLink"],["nz-tab-link","",3,"routerLink","queryParams"],["nz-icon","","nzType","borderless-table"]],template:function(i,n){i&1&&(p(0,"br"),r(1,"nz-tabset",0),f("nzAdd",function(){return n.newTab()})("nzClose",function(){return n.closeTab()}),s(2,Ct,3,0,"ng-container",1),_(3,"async"),r(4,"nz-tab"),s(5,vt,2,2,"a",2),o(),s(6,xt,2,0,"nz-tab",3),o()),i&2&&(l(2),a("ngIf",z(3,2,n.currentUser$)),l(4),a("ngIf",n.tagName))},dependencies:[A,w,T,ve,ie,Fe,Ee,Pe,ke,k,Q,te],styles:["a[nz-tab-link][_ngcontent-%COMP%]{color:#000;text-decoration:none}  div.ant-tabs-tab-active a[nz-tab-link]{color:#1890ff!important}"]})}}return t})();function At(t,c){if(t&1){let e=x();v(0),r(1,"button",7),f("click",function(){h(e);let n=d();return C(n.OpenCreateArticleForm())}),r(2,"i"),p(3,"span",8),r(4,"b"),m(5,"New Post"),o()()(),b()}}var ci=(()=>{class t{constructor(e,i){this.store=e,this.route=i,this.slug=this.route.snapshot.paramMap.get("slug")??"",this.currentUser$=this.store.select(P),this.data$=I({isLoading:this.store.select(F),error:this.store.select(ne),article:this.store.select(L)})}ngOnInit(){this.store.dispatch(M.getArticle({slug:this.slug}))}OpenCreateArticleForm(){this.drawerTemplate.openDrawer()}static{this.\u0275fac=function(i){return new(i||t)(u(N),u(D))}}static{this.\u0275cmp=y({type:t,selectors:[["app-article"]],viewQuery:function(i,n){if(i&1&&V(E,5),i&2){let g;O(g=B())&&(n.drawerTemplate=g.first)}},standalone:!0,features:[S],decls:11,vars:4,consts:[[1,"mb-20"],["nz-row",""],[4,"ngIf"],["nz-col","","nzFlex","1 1 200px"],["nz-col","","nzFlex","0 1 300px"],[3,"title"],["content",""],["nz-button","","nzSize","default","nzType","primary",3,"click"],["nz-icon","","nzType","edit",1,"right10"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"div",1),s(2,At,6,0,"ng-container",2),_(3,"async"),o()(),r(4,"div",1)(5,"div",3),p(6,"app-feed-toggler"),o(),r(7,"div",4),m(8,"Popular Tags"),o()(),r(9,"app-drawer",5),p(10,"create-article",6),o()),i&2&&(l(2),a("ngIf",z(3,2,n.currentUser$)),l(7),a("title","Create Article"))},dependencies:[A,w,T,K,J,W,ie,ee,Z,X,Y,k,Q,te,E,$e,st],styles:[".right10[_ngcontent-%COMP%]{margin-right:10px}.mb-20[_ngcontent-%COMP%]{margin-bottom:20px}"]})}}return t})();function Nt(t,c){if(t&1){let e=x();v(0),r(1,"app-article-form",1),f("articleSubmit",function(n){h(e);let g=d();return C(g.onSubmit(n))}),o(),b()}if(t&2){let e=c.ngIf;l(),a("initialValues",e.initialValues)("isSubmitting",e.isSubmitting)("errors",e.backendErrors)}}var pt=(()=>{class t{constructor(e,i){this.store=e,this.router=i,this.initialValues$=this.store.pipe(G(L),$(n=>n!==null),H(n=>({title:n.title,description:n.description,body:n.body,tagList:n.tagList,images:n.article_media}))),this.slug=this.router.snapshot.paramMap.get("slug")??"",this.data$=I({isSubmitting:this.store.select(Oe),backendErrors:this.store.select(Be),isLoading:this.store.select(F),initialValues:this.initialValues$})}ngOnInit(){this.store.dispatch(M.getArticle({slug:this.slug}))}onSubmit(e){let i={article:e};this.store.dispatch(M.updateArticle({request:i,slug:this.slug}))}static{this.\u0275fac=function(i){return new(i||t)(u(N),u(D))}}static{this.\u0275cmp=y({type:t,selectors:[["app-edit-article"]],standalone:!0,features:[S],decls:2,vars:3,consts:[[4,"ngIf"],[3,"articleSubmit","initialValues","isSubmitting","errors"]],template:function(i,n){i&1&&(s(0,Nt,2,3,"ng-container",0),_(1,"async")),i&2&&a("ngIf",z(1,1,n.data$))},dependencies:[A,w,T,He],encapsulation:2})}}return t})();var Mt=t=>t.article,dt=be(Mt,t=>t.data?.body??"");var It=["divArticleContent"],Dt=()=>({xs:8,sm:16,md:24,lg:32});function kt(t,c){if(t&1&&(r(0,"nz-page-header-tags",22)(1,"nz-tag",23),m(2),o()()),t&2){let e=c.$implicit;l(),a("nzColor","blue"),l(),q("#",e,"")}}function Pt(t,c){if(t&1){let e=x();r(0,"button",27),f("click",function(){h(e);let n=d(3);return C(n.openDrawerComponent())}),m(1," Edit Article "),o()}}function Et(t,c){if(t&1){let e=x();r(0,"button",28),f("click",function(){h(e);let n=d(3);return C(n.deleteArticle())}),m(1," Delete Article "),o()}}function Ft(t,c){if(t&1&&p(0,"button",29),t&2){d(2);let e=fe(9);a("nzDropdownMenu",e)}}function Lt(t,c){t&1&&(r(0,"nz-space"),s(1,Pt,2,0,"button",24)(2,Et,2,0,"button",25)(3,Ft,1,1,"button",26),o())}function Vt(t,c){if(t&1&&(r(0,"div",11)(1,"nz-card",30),p(2,"img",31),o()()),t&2){let e=c.$implicit,i=d(2);a("nzSpan",4.5),l(2),a("nzSrc",i.pathUrl+"/"+(e==null?null:e.filename))}}function Ot(t,c){if(t&1&&p(0,"div",32,1),t&2){let e=c.ngIf,i=d(2);pe("collapsed",i.isCollapse),a("innerHTML",e,se)}}function Bt(t,c){if(t&1){let e=x();r(0,"a",33),f("click",function(){h(e);let n=d(2);return C(n.toggleCollapse())}),m(1),o()}if(t&2){let e=d(2);l(),q(" ",e.isCollapse?"Read more":"Show less"," ")}}function qt(t,c){if(t&1){let e=x();v(0),r(1,"nz-page-header",5),f("nzBack",function(){h(e);let n=d();return C(n.onBack())}),p(2,"nz-avatar",6),r(3,"nz-page-header-subtitle"),m(4),o(),s(5,kt,3,2,"nz-page-header-tags",7),r(6,"nz-page-header-extra"),s(7,Lt,4,0,"nz-space",2),r(8,"nz-dropdown-menu",null,0)(10,"ul",8)(11,"li",9),m(12,"1st menu item length"),o(),r(13,"li",9),m(14,"2nd menu item length"),o(),r(15,"li",9),m(16,"3rd menu item length"),o()()()(),r(17,"nz-page-header-content")(18,"div",10),ue(19,Vt,3,2,"div",11,de),o(),r(21,"div",12)(22,"div",13),p(23,"nz-divider"),o()(),r(24,"div",12)(25,"div",13)(26,"div",14)(27,"h4",15),m(28),_(29,"titlecase"),o(),r(30,"span",16)(31,"strong")(32,"i"),m(33,"About:"),o(),m(34," \xA0"),o(),m(35),o(),p(36,"br")(37,"br"),s(38,Ot,2,3,"div",17),_(39,"async"),s(40,Bt,2,1,"a",18),r(41,"div",19),p(42,"app-add-to-favorites",20),o()()()()()(),p(43,"app-comment",21),b()}if(t&2){let e=c.ngIf,i=d();l(2),a("nzSrc",e.article==null||e.article.author==null?null:e.article.author.image),l(2),U(e.article==null||e.article.author==null?null:e.article.author.username),l(),a("ngForOf",e.article==null?null:e.article.tagList),l(2),a("ngIf",(e.article==null||e.article.author==null?null:e.article.author.username)==(i.currentUser==null?null:i.currentUser.username)),l(11),a("nzGutter",R(18,Dt)),l(),ge(e.article==null||e.article.article_media[0]==null?null:e.article.article_media[0].files),l(9),U(z(29,14,e.article==null?null:e.article.title)),l(7),U(e.article==null?null:e.article.description),l(3),a("ngIf",z(39,16,i.safeContent$)),l(2),a("ngIf",i.isViewReadMore),l(2),a("isFavorited",e.article.favorited)("articleSlug",e.article.slug)("favoritesCount",e.article.favoritesCount),l(),a("articleId",e.article==null?null:e.article.id)("slug",i.slug)}}var cn=(()=>{class t{constructor(e,i,n,g){this.store=e,this.route=i,this.location=n,this.sanitizer=g,this.slug=this.route.snapshot.paramMap.get("slug")??"",this.pathUrl=Re.apiPath+"/src/images",this.showToggle=!1,this.isCollapse=!0,this.isViewReadMore=!0,this.data$=I({isLoading:this.store.select(F),error:this.store.select(ne),article:this.store.select(L)}),this.modal=me(qe)}ngOnInit(){this.store.dispatch(M.getArticle({slug:this.slug})),this.safeContent$=this.store.select(dt).pipe(H(e=>this.sanitizer.bypassSecurityTrustHtml(e))),this.currentUserSubscription=this.store.pipe(G(P),$(Boolean)).subscribe(e=>{this.currentUser=e})}ngAfterViewChecked(){if(this.divArticleContent){let e=this.divArticleContent.nativeElement,i=e.classList.contains("rich-text-container");e.offsetHeight>=500?this.isViewReadMore=!0:this.isViewReadMore=!1}}deleteArticle(){this.confirmModal=this.modal.confirm({nzTitle:"Do you want to delete this article?",nzOnOk:()=>{this.store.dispatch(M.deleteArticle({slug:this.slug}))}})}openDrawerComponent(){this.drawerTemplate.toggleDrawer()}onBack(){this.location.back()}toggleCollapse(){this.isCollapse=!this.isCollapse}ngOnDestroy(){this.currentUserSubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(u(N),u(D),u(j),u(he))}}static{this.\u0275cmp=y({type:t,selectors:[["app-article-slug"]],viewQuery:function(i,n){if(i&1&&(V(E,5),V(It,5)),i&2){let g;O(g=B())&&(n.drawerTemplate=g.first),O(g=B())&&(n.divArticleContent=g.first)}},standalone:!0,features:[S],decls:5,vars:4,consts:[["menu","nzDropdownMenu"],["divArticleContent",""],[4,"ngIf"],[3,"title"],["content",""],["nzBackIcon","",3,"nzBack"],["nz-page-header-avatar","","nzIcon","user",3,"nzSrc"],["ngFor","",4,"ngFor","ngForOf"],["nz-menu",""],["nz-menu-item",""],["nz-row","",3,"nzGutter"],["nz-col","",1,"gutter-row",3,"nzSpan"],["nz-row",""],["nz-col","","nzSpan","18"],[1,"content"],["nz-typography",""],["nz-typography","","nzType","secondary"],["class","rich-text-container quill-content",3,"collapsed","innerHTML",4,"ngIf"],[3,"click",4,"ngIf"],[1,"content-link"],[3,"isFavorited","articleSlug","favoritesCount"],[3,"articleId","slug"],["ngFor",""],[3,"nzColor"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary","nzDanger","",3,"click",4,"nzSpaceItem"],["nz-button","","nzNoAnimation","","nz-dropdown","","nzPlacement","bottomRight","style","border: none; padding: 0",3,"nzDropdownMenu",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nz-button","","nzNoAnimation","","nz-dropdown","","nzPlacement","bottomRight",2,"border","none","padding","0",3,"nzDropdownMenu"],["nzHoverable","",2,"width","240px"],["nz-image","","width","200px","height","210vh","alt","",3,"nzSrc"],[1,"rich-text-container","quill-content",3,"innerHTML"],[3,"click"]],template:function(i,n){i&1&&(s(0,qt,44,19,"ng-container",2),_(1,"async"),v(2),r(3,"app-drawer",3),p(4,"app-edit-article",4),o(),b()),i&2&&(a("ngIf",z(1,2,n.data$)),l(3),a("title","Edit Article"))},dependencies:[A,_e,w,T,ze,De,Ie,ee,Z,X,Y,Me,we,Se,Te,Ne,Ae,K,J,W,k,ye,xe,Ke,Je,Ue,je,Qe,Ge,We,Ze,Ye,Xe,tt,et,nt,it,ot,rt,lt,at,Ve,Le,E,pt,mt,ct],styles:['.content[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1em}.content-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:16px}.content-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:8px}.content-image[_ngcontent-%COMP%]{margin:0 0 0 60px;display:flex;align-items:center}.content-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.editor[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:8px;min-height:150px;max-height:400px;overflow-y:auto;resize:vertical;font-family:inherit;font-size:14px;white-space:pre-wrap}.rich-text-container[_ngcontent-%COMP%]{max-height:none;overflow:hidden;max-width:150vh;overflow-x:auto;transition:max-height .3s ease}.rich-text-container.collapsed[_ngcontent-%COMP%]{max-height:500px;max-width:150vh;overflow-y:hidden;position:relative}.rich-text-container.collapsed[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:30px;background:linear-gradient(to bottom,transparent,white)}.quill-content[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;white-space:normal}@media (max-width: 768px){.content-image[_ngcontent-%COMP%]{flex:100%;margin:24px 0 0}}']})}}return t})();export{ci as a,cn as b};
