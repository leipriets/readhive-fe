import{$ as x,E as K,H as E,L as C,V as R,_ as ee,aa as te,ab as se,ba as ie,fb as re,gb as oe}from"./chunk-KYAOKWVV.js";import{A as F,D as L,Db as S,Ha as O,Mc as Y,Ra as $,Sa as W,Va as w,Xb as H,Yb as k,Yc as J,a as I,c as T,ea as g,f as m,gc as Q,h as M,ha as A,hc as U,kc as q,la as v,lc as V,m as b,ma as z,mc as X,qa as P,qb as n,ra as B,u as j,wa as _,wb as Z,wc as G,xa as y}from"./chunk-DZ3RKEIN.js";import{a as p,b as N}from"./chunk-GAL4ENT6.js";var fe=(()=>{class i{create(e){return typeof ResizeObserver>"u"?null:new ResizeObserver(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ne=(()=>{class i{constructor(e){this.nzResizeObserverFactory=e,this.observedElements=new Map}ngOnDestroy(){this.observedElements.forEach((e,t)=>this.cleanupObserver(t))}observe(e){let t=K(e);return new T(s=>{let o=this.observeElement(t).subscribe(s);return()=>{o.unsubscribe(),this.unobserveElement(t)}})}observeElement(e){if(this.observedElements.has(e))this.observedElements.get(e).count++;else{let t=new m,s=this.nzResizeObserverFactory.create(r=>t.next(r));s&&s.observe(e),this.observedElements.set(e,{observer:s,stream:t,count:1})}return this.observedElements.get(e).stream}unobserveElement(e){this.observedElements.has(e)&&(this.observedElements.get(e).count--,this.observedElements.get(e).count||this.cleanupObserver(e))}cleanupObserver(e){if(this.observedElements.has(e)){let{observer:t,stream:s}=this.observedElements.get(e);t&&t.disconnect(),s.complete(),this.observedElements.delete(e)}}static{this.\u0275fac=function(t){return new(t||i)(P(fe))}}static{this.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var de=["fixedEl"],ue=["*"],D=function(i){return i.resize="resize",i.scroll="scroll",i.touchstart="touchstart",i.touchmove="touchmove",i.touchend="touchend",i.pageshow="pageshow",i.load="LOAD",i}(D||{});function pe(i){return typeof window<"u"&&i===window}function ce(i){return pe(i)?{top:0,left:0,bottom:0}:i.getBoundingClientRect()}var me="affix",a="ant-affix",be=20,ge=(()=>{class i{get target(){let e=this.nzTarget;return(typeof e=="string"?this.document.querySelector(e):e)||window}constructor(e,t,s,r,o,c,f,l,h){this.nzConfigService=t,this.scrollSrv=s,this.ngZone=r,this.platform=o,this.renderer=c,this.nzResizeObserver=f,this.cdr=l,this.directionality=h,this._nzModuleName=me,this.nzChange=new $,this.dir="ltr",this.positionChangeSubscription=I.EMPTY,this.offsetChanged$=new M(1),this.destroy$=new m,this.document=B(J),this.placeholderNode=e.nativeElement}ngOnInit(){this.directionality.change?.pipe(g(this.destroy$)).subscribe(e=>{this.dir=e,this.registerListeners(),this.updatePosition({}),this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){let{nzOffsetBottom:t,nzOffsetTop:s,nzTarget:r}=e;(t||s)&&this.offsetChanged$.next(),r&&this.registerListeners()}ngAfterViewInit(){this.registerListeners()}ngOnDestroy(){this.removeListeners()}registerListeners(){if(!this.platform.isBrowser)return;this.removeListeners();let e=this.target===window?this.document.body:this.target;this.positionChangeSubscription=this.ngZone.runOutsideAngular(()=>L(...Object.keys(D).map(t=>F(this.target,t)),this.offsetChanged$.pipe(j(()=>({}))),this.nzResizeObserver.observe(e)).pipe(A(be,void 0,{trailing:!0}),g(this.destroy$)).subscribe(t=>this.updatePosition(t))),this.timeout=setTimeout(()=>this.updatePosition({}))}removeListeners(){clearTimeout(this.timeout),this.positionChangeSubscription.unsubscribe(),this.destroy$.next(!0),this.destroy$.complete()}getOffset(e,t){let s=e.getBoundingClientRect(),r=ce(t),o=this.scrollSrv.getScroll(t,!0),c=this.scrollSrv.getScroll(t,!1),f=this.document.body,l=f.clientTop||0,h=f.clientLeft||0;return{top:s.top-r.top+o-l,left:s.left-r.left+c-h,width:s.width,height:s.height}}setAffixStyle(e,t){let s=this.affixStyle,r=this.target===window;if(e.type==="scroll"&&s&&t&&r||E(s,t))return;let o=!!t,c=this.fixedEl.nativeElement;this.renderer.setStyle(c,"cssText",R(t)),this.affixStyle=t,o?c.classList.add(a):c.classList.remove(a),this.updateRtlClass(),(t&&!s||!t&&s)&&this.nzChange.emit(o)}setPlaceholderStyle(e){let t=this.placeholderStyle;E(e,t)||(this.renderer.setStyle(this.placeholderNode,"cssText",R(e)),this.placeholderStyle=e)}syncPlaceholderStyle(e){if(!this.affixStyle)return;this.renderer.setStyle(this.placeholderNode,"cssText",""),this.placeholderStyle=void 0;let t={width:this.placeholderNode.offsetWidth,height:this.fixedEl.nativeElement.offsetHeight};this.setAffixStyle(e,p(p({},this.affixStyle),t)),this.setPlaceholderStyle(t)}updatePosition(e){if(!this.platform.isBrowser)return;let t=this.target,s=this.nzOffsetTop,r=this.scrollSrv.getScroll(t,!0),o=this.getOffset(this.placeholderNode,t),c=this.fixedEl.nativeElement,f={width:c.offsetWidth,height:c.offsetHeight},l={top:!1,bottom:!1};typeof s!="number"&&typeof this.nzOffsetBottom!="number"?(l.top=!0,s=0):(l.top=typeof s=="number",l.bottom=typeof this.nzOffsetBottom=="number");let h=ce(t),le=t.innerHeight||t.clientHeight;if(r>=o.top-s&&l.top){let d=o.width,u=h.top+s;this.setAffixStyle(e,{position:"fixed",top:u,left:h.left+o.left,width:d}),this.setPlaceholderStyle({width:d,height:f.height})}else if(r<=o.top+f.height+this.nzOffsetBottom-le&&l.bottom){let d=t===window?0:window.innerHeight-h.bottom,u=o.width;this.setAffixStyle(e,{position:"fixed",bottom:d+this.nzOffsetBottom,left:h.left+o.left,width:u}),this.setPlaceholderStyle({width:u,height:o.height})}else e.type===D.resize&&this.affixStyle&&this.affixStyle.position==="fixed"&&this.placeholderNode.offsetWidth?this.setAffixStyle(e,N(p({},this.affixStyle),{width:this.placeholderNode.offsetWidth})):this.setAffixStyle(e),this.setPlaceholderStyle();e.type==="resize"&&this.syncPlaceholderStyle(e)}updateRtlClass(){let e=this.fixedEl.nativeElement;this.dir==="rtl"?e.classList.contains(a)?e.classList.add(`${a}-rtl`):e.classList.remove(`${a}-rtl`):e.classList.remove(`${a}-rtl`)}static{this.\u0275fac=function(t){return new(t||i)(n(w),n(ee),n(se),n(W),n(te),n(Z),n(ne),n(Y),n(re))}}static{this.\u0275cmp=_({type:i,selectors:[["nz-affix"]],viewQuery:function(t,s){if(t&1&&q(de,7),t&2){let r;V(r=X())&&(s.fixedEl=r.first)}},inputs:{nzTarget:"nzTarget",nzOffsetTop:[2,"nzOffsetTop","nzOffsetTop",C],nzOffsetBottom:[2,"nzOffsetBottom","nzOffsetBottom",C]},outputs:{nzChange:"nzChange"},exportAs:["nzAffix"],standalone:!0,features:[S,O,G],ngContentSelectors:ue,decls:3,vars:0,consts:[["fixedEl",""]],template:function(t,s){t&1&&(Q(),H(0,"div",null,0),U(2),k())},dependencies:[oe,ie],encapsulation:2,changeDetection:0})}}return b([x()],i.prototype,"nzOffsetTop",void 0),b([x()],i.prototype,"nzOffsetBottom",void 0),i})(),Ze=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=y({type:i})}static{this.\u0275inj=z({imports:[ge]})}}return i})();export{ne as a,ge as b,Ze as c};
