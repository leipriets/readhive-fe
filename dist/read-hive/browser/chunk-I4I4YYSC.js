import{$a as J,Eb as Y,Lb as ee,M as B,Mb as te,_ as S,fa as Z,ga as q,mb as Q,wb as X}from"./chunk-W7R43Y2J.js";import{$b as W,Bb as T,E as x,Gb as j,Ia as O,Ja as F,Kb as m,L as E,Lb as P,Mb as $,Mc as d,Oa as R,Ra as z,Sb as L,Ub as k,Vb as H,Wb as U,Xb as p,Yb as f,Zb as r,_b as V,bc as G,dc as _,ea as w,f as h,fc as I,hd as K,la as A,lb as b,pb as l,qa as u,qb as a,wa as C,wc as M,ya as y}from"./chunk-SSCO7BOT.js";import{a as c,b as N}from"./chunk-GAL4ENT6.js";function ne(n,o){n&1&&r(0,"span",3)}function ie(n,o){n&1&&r(0,"span",4)}function se(n,o){n&1&&r(0,"span",5)}function oe(n,o){n&1&&r(0,"span",6)}function ae(n,o){n&1&&r(0,"span",7)}function re(n,o){if(n&1&&(V(0),r(1,"span",9),W()),n&2){let e=I();l(),m("innerHTML",e.instance.content,b)}}function ce(n,o){if(n&1){let e=G();p(0,"nz-message",2),_("destroyed",function(i){O(e);let s=I();return F(s.remove(i.id,i.userAction))}),f()}if(n&2){let e=o.$implicit;m("instance",e)}}var le=0,D=class{constructor(o,e,t){this.nzSingletonService=o,this.overlay=e,this.injector=t}remove(o){this.container&&(o?this.container.remove(o):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${le++}`}withContainer(o){let e=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(e)return e;let t=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),i=new Q(o,null,this.injector),s=t.attach(i),v=t.hostElement;return v.style.zIndex="1010",e||(this.container=e=s.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,e),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),t.dispose()})),e}},me=(()=>{class n{constructor(e,t){this.cdr=e,this.nzConfigService=t,this.instances=[],this._afterAllInstancesRemoved=new h,this.afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable(),this.destroy$=new h,this.updateConfig()}ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(e){let t=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,t],this.readyInstances(),t}remove(e,t=!1){this.instances.map((i,s)=>({index:s,instance:i})).filter(({instance:i})=>i.messageId===e).forEach(({index:i,instance:s})=>{this.instances.splice(i,1),this.instances=[...this.instances],this.onRemove(s,t),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new h,e}onRemove(e,t){e.onClose.next(t),e.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){let{nzDuration:t,nzAnimate:i,nzPauseOnHover:s}=this.config;return c({nzDuration:t,nzAnimate:i,nzPauseOnHover:s},e)}static{this.\u0275fac=function(t){return new(t||n)(a(d),a(S))}}static{this.\u0275dir=y({type:n})}}return n})(),he=(()=>{class n{constructor(e){this.cdr=e,this.destroyed=new z,this.animationStateChanged=new h,this.userAction=!1}ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(x(e=>e.phaseName==="done"&&e.toState==="leave"),E(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:e})},200)):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}static{this.\u0275fac=function(t){return new(t||n)(a(d))}}static{this.\u0275dir=y({type:n})}}return n})(),pe=(()=>{class n extends he{constructor(e){super(e),this.destroyed=new z}static{this.\u0275fac=function(t){return new(t||n)(a(d))}}static{this.\u0275cmp=C({type:n,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],standalone:!0,features:[T,M],decls:9,vars:4,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content",3,"ngClass"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","info-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","loading"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"]],template:function(t,i){if(t&1&&(p(0,"div",0),_("@moveUpMotion.done",function(v){return i.animationStateChanged.next(v)})("mouseenter",function(){return i.onEnter()})("mouseleave",function(){return i.onLeave()}),p(1,"div",1)(2,"div",2),j(3,ne,1,0,"span",3)(4,ie,1,0,"span",4)(5,se,1,0,"span",5)(6,oe,1,0,"span",6)(7,ae,1,0,"span",7)(8,re,2,1,"ng-container",8),f()()()),t&2){let s;m("@moveUpMotion",i.instance.state),l(2),m("ngClass","ant-message-"+i.instance.type),l(),L((s=i.instance.type)==="success"?3:s==="info"?4:s==="warning"?5:s==="error"?6:s==="loading"?7:-1),l(5),m("nzStringTemplateOutlet",i.instance.content)}},dependencies:[K,q,Z,te,ee],encapsulation:2,data:{animation:[Y]},changeDetection:0})}}return n})(),g="message",de={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},ue=(()=>{class n extends me{constructor(e,t){super(e,t),this.dir="ltr";let i=this.nzConfigService.getConfigForComponent(g);this.dir=i?.nzDirection||"ltr"}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(g).pipe(w(this.destroy$)).subscribe(()=>{this.updateConfig();let e=this.nzConfigService.getConfigForComponent(g);if(e){let{nzDirection:t}=e;this.dir=t||this.dir}})}updateConfig(){this.config=c(c(c({},de),this.config),this.nzConfigService.getConfigForComponent(g)),this.top=B(this.config.nzTop),this.cdr.markForCheck()}static{this.\u0275fac=function(t){return new(t||n)(a(d),a(S))}}static{this.\u0275cmp=C({type:n,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],standalone:!0,features:[T,M],decls:3,vars:4,consts:[[1,"ant-message"],[3,"instance"],[3,"destroyed","instance"]],template:function(t,i){t&1&&(p(0,"div",0),H(1,ce,1,1,"nz-message",1,k),f()),t&2&&(P("top",i.top),$("ant-message-rtl",i.dir==="rtl"),l(),U(i.instances))},dependencies:[pe],encapsulation:2,changeDetection:0})}}return n})();var ke=(()=>{class n extends D{constructor(e,t,i){super(e,t,i),this.componentPrefix="message-"}success(e,t){return this.createInstance({type:"success",content:e},t)}error(e,t){return this.createInstance({type:"error",content:e},t)}info(e,t){return this.createInstance({type:"info",content:e},t)}warning(e,t){return this.createInstance({type:"warning",content:e},t)}loading(e,t){return this.createInstance({type:"loading",content:e},t)}create(e,t,i){return this.createInstance({type:e,content:t},i)}createInstance(e,t){return this.container=this.withContainer(ue),this.container.create(N(c({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:t}))}static{this.\u0275fac=function(t){return new(t||n)(u(J),u(X),u(R))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{D as a,me as b,he as c,ke as d};
