import{a as Ct,b as $t,c as Lt,g as Et}from"./chunk-UQHQSRLE.js";import{a as z,b as Rr,c as $r,h as Lr,i as Z}from"./chunk-A7SMAKTU.js";import{e as gr,f as vr,g as Cr,i as rt}from"./chunk-TVVEEASD.js";import{a as et}from"./chunk-M4D2ETN2.js";import{a as Er,b as Ir,c as xr,e as Tr,f as O,g as Fr,h as br}from"./chunk-JCQJTF3W.js";import{a as jr}from"./chunk-ZDOJNOAD.js";import{a as vt,b as Nr,c as kr}from"./chunk-XEDZN6SJ.js";import"./chunk-NU526JQJ.js";import{a as yt,b as wr,c as Mr}from"./chunk-KDUSOC5H.js";import{a as l,b as u,c as m,d as dr,f as gt,i as N,j as Ur,k as Or,p as D,q as At}from"./chunk-CZY3ZFCS.js";import{a as Dr,b as Pr}from"./chunk-ZC2JLTOP.js";import"./chunk-6MQQRE37.js";import{a as C,e as St}from"./chunk-456HDTCV.js";import{H as hr,P as w,Q as yr,R as Sr,U as Ar,q as tr}from"./chunk-GN2DYACI.js";import{Aa as Pt,Ba as ht,Ca as rr,Fa as or,Ga as ir,Ha as Rt,Ia as nr,Ja as sr,Ka as Y,La as cr,Na as ar,Oa as R,Pa as pr,Qa as Q,Ra as lr,Ta as ur,Ua as mr,Va as fr,e as M,f as Dt,g as _e,ga as dt,h as Be,i as He,n as Ke,o as G,oa as Qe,pa as qe,q as Ve,r as Je,s as Ge,t as Ze,u as We,v as Xe,va as er,w as Ye}from"./chunk-KYAOKWVV.js";import{$ as Ee,$a as Me,Aa as ut,Ba as mt,D as kt,E as X,G as g,H as ye,J as Se,Jc as Pe,L as Ae,Lc as Re,Ma as be,O as ve,Sa as ft,Ta as we,Yc as $e,Zb as je,_ as Ce,ba as Ie,c as Nt,da as h,ea as lt,fd as Le,ga as j,h as me,ia as xe,j as fe,ja as Te,l as de,la as x,n as he,oa as tt,p as d,qa as v,qb as jt,qd as ze,ra as n,rb as Ue,t as ge,tb as Oe,u as c,vb as Ne,wa as Fe,wc as De,yb as ke}from"./chunk-DZ3RKEIN.js";import{a as $,b as L,e as B}from"./chunk-GAL4ENT6.js";var Eo=[Xe,Ye,Ge,Ze,We];function zr(){return mt(dt.forRoot(Eo))}function Io(e){let o=e,t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var _r=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Io];var xo="@",To=(()=>{class e{constructor(t,r,i,s,f){this.doc=t,this.delegate=r,this.zone=i,this.animationType=s,this.moduleImpl=f,this._rendererFactoryPromise=null,this.scheduler=n(Oe,{optional:!0}),this.loadingSchedulerFn=n(Fo,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-UCDDDMKK.js").then(i=>i),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(t):r=t(),r.catch(i=>{throw new Te(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let f=new s(this.delegate,this._engine,this.zone);return this.delegate=f,f})}createRenderer(t,r){let i=this.delegate.createRenderer(t,r);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let s=new zt(i);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(f=>{let S=f.createRenderer(t,r);s.use(S),this.scheduler?.notify(10)}).catch(f=>{s.use(i)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(r){Ue()}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})(),zt=class{constructor(o){this.delegate=o,this.replay=[],this.\u0275type=1}use(o){if(this.delegate=o,this.replay!==null){for(let t of this.replay)t(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,t){return this.delegate.createElement(o,t)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,t){this.delegate.appendChild(o,t)}insertBefore(o,t,r,i){this.delegate.insertBefore(o,t,r,i)}removeChild(o,t,r){this.delegate.removeChild(o,t,r)}selectRootElement(o,t){return this.delegate.selectRootElement(o,t)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,t,r,i){this.delegate.setAttribute(o,t,r,i)}removeAttribute(o,t,r){this.delegate.removeAttribute(o,t,r)}addClass(o,t){this.delegate.addClass(o,t)}removeClass(o,t){this.delegate.removeClass(o,t)}setStyle(o,t,r,i){this.delegate.setStyle(o,t,r,i)}removeStyle(o,t,r){this.delegate.removeStyle(o,t,r)}setProperty(o,t,r){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(o,t,r)),this.delegate.setProperty(o,t,r)}setValue(o,t){this.delegate.setValue(o,t)}listen(o,t,r){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(o,t,r)),this.delegate.listen(o,t,r)}shouldReplay(o){return this.replay!==null&&o.startsWith(xo)}},Fo=new tt("");function Br(e="animations"){return ke("NgAsyncAnimations"),ut([{provide:Ne,useFactory:(o,t,r)=>new To(o,t,r,e),deps:[$e,Be,ft]},{provide:Me,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ct="PERFORM_ACTION",wo="REFRESH",Zr="RESET",Wr="ROLLBACK",Xr="COMMIT",Yr="SWEEP",Qr="TOGGLE_ACTION",Mo="SET_ACTIONS_ACTIVE",qr="JUMP_TO_STATE",to="JUMP_TO_ACTION",qt="IMPORT_STATE",eo="LOCK_CHANGES",ro="PAUSE_RECORDING",it=class{constructor(o,t){if(this.action=o,this.timestamp=t,this.type=ct,typeof o.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},_t=class{constructor(){this.type=wo}},Bt=class{constructor(o){this.timestamp=o,this.type=Zr}},Ht=class{constructor(o){this.timestamp=o,this.type=Wr}},Kt=class{constructor(o){this.timestamp=o,this.type=Xr}},Vt=class{constructor(){this.type=Yr}},Jt=class{constructor(o){this.id=o,this.type=Qr}};var Gt=class{constructor(o){this.index=o,this.type=qr}},Zt=class{constructor(o){this.actionId=o,this.type=to}},Wt=class{constructor(o){this.nextLiftedState=o,this.type=qt}},Xt=class{constructor(o){this.status=o,this.type=eo}},Yt=class{constructor(o){this.status=o,this.type=ro}};var Ft=new tt("@ngrx/store-devtools Options"),Hr=new tt("@ngrx/store-devtools Initial Config");function oo(){return null}var Uo="NgRx Store DevTools";function Oo(e){let o={maxAge:!1,monitor:oo,actionSanitizer:void 0,stateSanitizer:void 0,name:Uo,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof e=="function"?e():e,r=t.logOnly?{pause:!0,export:!0,test:!0}:!1,i=t.features||r||o.features;i.import===!0&&(i.import="custom");let s=Object.assign({},o,{features:i},t);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function Kr(e,o){return e.filter(t=>o.indexOf(t)<0)}function io(e){let{computedStates:o,currentStateIndex:t}=e;if(t>=o.length){let{state:i}=o[o.length-1];return i}let{state:r}=o[t];return r}function st(e){return new it(e,+Date.now())}function No(e,o){return Object.keys(o).reduce((t,r)=>{let i=Number(r);return t[i]=no(e,o[i],i),t},{})}function no(e,o,t){return L($({},o),{action:e(o.action,t)})}function ko(e,o){return o.map((t,r)=>({state:so(e,t.state,r),error:t.error}))}function so(e,o,t){return e(o,t)}function co(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function jo(e,o,t,r){let i=[],s={},f=[];return e.stagedActionIds.forEach((S,b)=>{let a=e.actionsById[S];a&&(b&&te(e.computedStates[b],a,o,t,r)||(s[S]=a,i.push(S),f.push(e.computedStates[b])))}),L($({},e),{stagedActionIds:i,actionsById:s,computedStates:f})}function te(e,o,t,r,i){let s=t&&!t(e,o.action),f=r&&!o.action.type.match(r.map(b=>Vr(b)).join("|")),S=i&&o.action.type.match(i.map(b=>Vr(b)).join("|"));return s||f||S}function Vr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ao(e){return{ngZone:e?n(ft):null,connectInZone:e}}var bt=(()=>{class e extends ht{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=be(e)))(i||e)}})()}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})(),It={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Qt=new tt("@ngrx/store-devtools Redux Devtools Extension"),po=(()=>{class e{constructor(t,r,i){this.config=r,this.dispatcher=i,this.zoneConfig=ao(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,r){if(this.devtoolsExtension)if(t.type===ct){if(r.isLocked||r.isPaused)return;let i=io(r);if(co(this.config)&&te(i,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?so(this.config.stateSanitizer,i,r.currentStateIndex):i,f=this.config.actionSanitizer?no(this.config.actionSanitizer,t,r.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(f,s))}else{let i=L($({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?No(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?ko(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Nt(t=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(i=>t.next(i)),r.unsubscribe}):de}createActionStreams(){let t=this.createChangesObservable().pipe(Ee()),r=t.pipe(X(a=>a.type===It.START)),i=t.pipe(X(a=>a.type===It.STOP)),s=t.pipe(X(a=>a.type===It.DISPATCH),c(a=>this.unwrapAction(a.payload)),ye(a=>a.type===qt?this.dispatcher.pipe(X(U=>U.type===Rt),ge(1e3),Se(1e3),c(()=>a),g(()=>d(a)),Ae(1)):d(a))),S=t.pipe(X(a=>a.type===It.ACTION),c(a=>this.unwrapAction(a.payload))).pipe(lt(i)),b=s.pipe(lt(i));this.start$=r.pipe(lt(i)),this.actions$=this.start$.pipe(h(()=>S)),this.liftedActions$=this.start$.pipe(h(()=>b))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let r={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(r.maxAge=t.maxAge),r}sendToReduxDevtools(t){try{t()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}static{this.\u0275fac=function(r){return new(r||e)(v(Qt),v(Ft),v(bt))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})(),Tt={type:Pt},Do="@ngrx/store-devtools/recompute",Po={type:Do};function lo(e,o,t,r,i){if(r)return{state:t,error:"Interrupted by an error up the chain"};let s=t,f;try{s=e(t,o)}catch(S){f=S.toString(),i.handleError(S)}return{state:s,error:f}}function xt(e,o,t,r,i,s,f,S,b){if(o>=e.length&&e.length===s.length)return e;let a=e.slice(0,o),U=s.length-(b?1:0);for(let p=o;p<U;p++){let E=s[p],P=i[E].action,A=a[p-1],y=A?A.state:r,K=A?A.error:void 0,V=f.indexOf(E)>-1?A:lo(t,P,y,K,S);a.push(V)}return b&&a.push(e[e.length-1]),a}function Ro(e,o){return{monitorState:o(void 0,{}),nextActionId:1,actionsById:{0:st(Tt)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function $o(e,o,t,r,i={}){return s=>(f,S)=>{let{monitorState:b,actionsById:a,nextActionId:U,stagedActionIds:p,skippedActionIds:E,committedState:P,currentStateIndex:A,computedStates:y,isLocked:K,isPaused:k}=f||o;f||(a=Object.create(a));function V(F){let T=F,W=p.slice(1,T+1);for(let _=0;_<W.length;_++)if(y[_+1].error){T=_,W=p.slice(1,T+1);break}else delete a[W[_]];E=E.filter(_=>W.indexOf(_)===-1),p=[0,...p.slice(T+1)],P=y[T].state,y=y.slice(T),A=A>T?A-T:0}function J(){a={0:st(Tt)},U=1,p=[0],E=[],P=y[A].state,A=0,y=[]}let I=0;switch(S.type){case eo:{K=S.status,I=1/0;break}case ro:{k=S.status,k?(p=[...p,U],a[U]=new it({type:"@ngrx/devtools/pause"},+Date.now()),U++,I=p.length-1,y=y.concat(y[y.length-1]),A===p.length-2&&A++,I=1/0):J();break}case Zr:{a={0:st(Tt)},U=1,p=[0],E=[],P=e,A=0,y=[];break}case Xr:{J();break}case Wr:{a={0:st(Tt)},U=1,p=[0],E=[],A=0,y=[];break}case Qr:{let{id:F}=S;E.indexOf(F)===-1?E=[F,...E]:E=E.filter(W=>W!==F),I=p.indexOf(F);break}case Mo:{let{start:F,end:T,active:W}=S,_=[];for(let Ot=F;Ot<T;Ot++)_.push(Ot);W?E=Kr(E,_):E=[...E,..._],I=p.indexOf(F);break}case qr:{A=S.index,I=1/0;break}case to:{let F=p.indexOf(S.actionId);F!==-1&&(A=F),I=1/0;break}case Yr:{p=Kr(p,E),E=[],A=Math.min(A,p.length-1);break}case ct:{if(K)return f||o;if(k||f&&te(f.computedStates[A],S,i.predicate,i.actionsSafelist,i.actionsBlocklist)){let T=y[y.length-1];y=[...y.slice(0,-1),lo(s,S.action,T.state,T.error,t)],I=1/0;break}i.maxAge&&p.length===i.maxAge&&V(1),A===p.length-1&&A++;let F=U++;a[F]=S,p=[...p,F],I=p.length-1;break}case qt:{({monitorState:b,actionsById:a,nextActionId:U,stagedActionIds:p,skippedActionIds:E,committedState:P,currentStateIndex:A,computedStates:y,isLocked:K,isPaused:k}=S.nextLiftedState);break}case Pt:{I=0,i.maxAge&&p.length>i.maxAge&&(y=xt(y,I,s,P,a,p,E,t,k),V(p.length-i.maxAge),I=1/0);break}case Rt:{if(y.filter(T=>T.error).length>0)I=0,i.maxAge&&p.length>i.maxAge&&(y=xt(y,I,s,P,a,p,E,t,k),V(p.length-i.maxAge),I=1/0);else{if(!k&&!K){A===p.length-1&&A++;let T=U++;a[T]=new it(S,+Date.now()),p=[...p,T],I=p.length-1,y=xt(y,I,s,P,a,p,E,t,k)}y=y.map(T=>L($({},T),{state:s(T.state,Po)})),A=p.length-1,i.maxAge&&p.length>i.maxAge&&V(p.length-i.maxAge),I=1/0}break}default:{I=1/0;break}}return y=xt(y,I,s,P,a,p,E,t,k),b=r(b,S),{monitorState:b,actionsById:a,nextActionId:U,stagedActionIds:p,skippedActionIds:E,committedState:P,currentStateIndex:A,computedStates:y,isLocked:K,isPaused:k}}}var Jr=(()=>{class e{constructor(t,r,i,s,f,S,b,a){let U=Ro(b,a.monitor),p=$o(b,U,S,a.monitor,a),E=kt(kt(r.asObservable().pipe(Ie(1)),s.actions$).pipe(c(st)),t,s.liftedActions$).pipe(he(fe)),P=i.pipe(c(p)),A=ao(a.connectInZone),y=new me(1);this.liftedStateSubscription=E.pipe(xe(P),Gr(A),Ce(({state:V},[J,I])=>{let F=I(V,J);return J.type!==ct&&co(a)&&(F=jo(F,a.predicate,a.actionsSafelist,a.actionsBlocklist)),s.notify(J,F),{state:F,action:J}},{state:U,action:null})).subscribe(({state:V,action:J})=>{if(y.next(V),J.type===ct){let I=J.action;f.next(I)}}),this.extensionStartSubscription=s.start$.pipe(Gr(A)).subscribe(()=>{this.refresh()});let K=y.asObservable(),k=K.pipe(c(io));Object.defineProperty(k,"state",{value:er(k,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=K,this.state=k}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new it(t,+Date.now()))}refresh(){this.dispatch(new _t)}reset(){this.dispatch(new Bt(+Date.now()))}rollback(){this.dispatch(new Ht(+Date.now()))}commit(){this.dispatch(new Kt(+Date.now()))}sweep(){this.dispatch(new Vt)}toggleAction(t){this.dispatch(new Jt(t))}jumpToAction(t){this.dispatch(new Zt(t))}jumpToState(t){this.dispatch(new Gt(t))}importState(t){this.dispatch(new Wt(t))}lockChanges(t){this.dispatch(new Xt(t))}pauseRecording(t){this.dispatch(new Yt(t))}static{this.\u0275fac=function(r){return new(r||e)(v(bt),v(ht),v(or),v(po),v(nr),v(we),v(rr),v(Ft))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})();function Gr({ngZone:e,connectInZone:o}){return t=>o?new Nt(r=>t.subscribe({next:i=>e.run(()=>r.next(i)),error:i=>e.run(()=>r.error(i)),complete:()=>e.run(()=>r.complete())})):t}var Lo=new tt("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function zo(e,o){return!!e||o.monitor!==oo}function _o(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function Bo(e){return e.state}function uo(e={}){return ut([po,bt,Jr,{provide:Hr,useValue:e},{provide:Lo,deps:[Qt,Ft],useFactory:zo},{provide:Qt,useFactory:_o},{provide:Ft,deps:[Hr],useFactory:Oo},{provide:sr,deps:[Jr],useFactory:Bo},{provide:ir,useExisting:bt}])}var mo=[{path:"",pathMatch:"full",redirectTo:"global-feed"},{path:"",loadChildren:()=>import("./chunk-SFQO7DN2.js").then(e=>e.innerPageRoutes)},{path:"sp",loadChildren:()=>import("./chunk-VGDFA3UR.js").then(e=>e.singlePageRoutes)}];var ee={};B(ee,{getFeedEffect:()=>Ho});var fo=(()=>{class e{constructor(t){this.http=t}getFeed(t){let r=C.apiUrl+t;return this.http.get(r)}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ho=l((e=n(u),o=n(fo))=>e.pipe(m(vt.getFeed),h(({url:t})=>o.getFeed(t).pipe(ve(100),c(r=>{let i=r.articles.length===0;return vt.getFeedSuccess({feed:r,isLastPage:i})}),g(()=>d(vt.getFeedFailure()))))),{functional:!0});var re={};B(re,{getCurrentUserEffect:()=>Ko,loginEffect:()=>Go,logoutEffect:()=>Yo,notifUpdateCurrentUser:()=>Xo,redirectAfterLoginEffect:()=>Zo,redirectAfterRegisterEffect:()=>Jo,registerEffect:()=>Vo,updateCurrentUserEffect:()=>Wo});var nt=(()=>{class e{constructor(t){this.http=t}getUser(t){return t.user}getCurrentUser(){let t=C.apiUrl+"/user";return this.http.get(t).pipe(c(this.getUser))}register(t){let r=C.apiUrl+"/users";return this.http.post(r,t).pipe(c(this.getUser))}login(t){let r=C.apiUrl+"/users/login";return this.http.post(r,t).pipe(c(this.getUser))}logout(){let t=C.apiUrl+"/user/logout";return this.http.post(t,[])}updateCurrentUser(t,r){let i=C.apiUrl+"/user-update",s=new FormData;return s.append("username",t.user.username),s.append("bio",t.user.bio),s.append("email",t.user.email),t.user.image&&s.append("image",t.user.image,r),this.http.post(i,s).pipe(c(this.getUser))}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ko=l((e=n(u),o=n(nt),t=n(rt))=>e.pipe(m(w.getCurrentUser),h(()=>t.get("BVaccessToken")?o.getCurrentUser().pipe(c(i=>w.getCurrentUserSuccess({currentUser:i})),g(i=>(i?.status==401&&localStorage.removeItem("BVaccessToken"),d(w.getCurrentUserFailure())))):d(w.getCurrentUserFailure))),{functional:!0}),Vo=l((e=n(u),o=n(nt),t=n(rt))=>e.pipe(m(w.register),h(({request:r})=>o.register(r).pipe(c(i=>(t.set("BVaccessToken",i.token),w.registerSuccess({currentUser:i}))),g(i=>d(w.registerFailure({errors:i.error.errors})))))),{functional:!0}),Jo=l((e=n(u),o=n(G))=>e.pipe(m(w.registerSuccess),j(()=>{o.navigateByUrl("/")})),{functional:!0,dispatch:!1}),Go=l((e=n(u),o=n(nt),t=n(rt))=>e.pipe(m(w.login),h(({request:r})=>o.login(r).pipe(c(i=>(console.log(i),t.set("BVaccessToken",i.token),w.loginSuccess({currentUser:i}))),g(i=>(console.log(i),d(w.loginFailure({errors:i.error.error}))))))),{functional:!0}),Zo=l((e=n(u),o=n(G))=>e.pipe(m(w.loginSuccess),j(()=>{o.navigateByUrl("/")})),{functional:!0,dispatch:!1}),Wo=l((e=n(u),o=n(nt))=>e.pipe(m(w.updateCurrentUser),h(({currentUserRequest:t,filename:r})=>o.updateCurrentUser(t,r).pipe(c(i=>w.updateCurrentUserSuccess({currentUser:i})),g(i=>d(w.updateCurrentUserFailure({errors:i.error.errors})))))),{functional:!0}),Xo=l((e=n(u),o=n(St))=>e.pipe(m(w.updateCurrentUserSuccess),j(()=>o.success("Profile updated successfully."))),{functional:!0,dispatch:!1}),Yo=l((e=n(u),o=n(G),t=n(rt),r=n(nt))=>e.pipe(m(w.logout),j(()=>{r.logout().subscribe(),t.set("BVaccessToken",""),o.navigateByUrl("/sp/login")})),{functional:!0,dispatch:!1});var oe={};B(oe,{createArticleEffect:()=>qo,deleteArticleEffect:()=>oi,getArticleEffect:()=>Qo,redirectAfterCreateEffect:()=>ti,redirectAfterUpdateEffect:()=>ri,showErrorNotifArticleEffect:()=>ni,showSuccessModalAfterDeleteEffect:()=>ii,updateArticleEffect:()=>ei});var at=(()=>{class e{constructor(t){this.http=t}getArticle(t){let r=`${C.apiUrl}/articles/${t}`;return this.http.get(r).pipe(c(i=>i.article))}createArticle(t){let r=C.apiUrl+"/articles",i=new FormData;return i.append("article[title]",t.article.title),i.append("article[description]",t.article.description),i.append("article[body]",t.article.body),t.article.tagList.forEach((s,f)=>{i.append(`article[tagList][${f}]`,s)}),t.article?.images?.forEach(s=>{console.log("article service",s),i.append("images",s.originFileObj)}),this.http.post(r,i).pipe(c(s=>s.article))}updateArticle(t,r){let i=`${C.apiUrl}/articles/${t}`,s=new FormData;return s.append("article[title]",r.article.title),s.append("article[description]",r.article.description),s.append("article[body]",r.article.body),r.article.tagList.forEach((f,S)=>{s.append(`article[tagList][${S}]`,f)}),r.article?.images?.forEach(f=>{f?.originFileObj?s.append("images",f.originFileObj):s.append("images",JSON.stringify(f))}),this.http.put(i,s).pipe(c(f=>f.article))}deleteArticle(t){let r=`${C.apiUrl}/articles/${t}`;return this.http.delete(r)}commentArticle(t){console.log(t);let r=t.comment.slug,i=`${C.apiUrl}/articles/${r}/comments`;return this.http.post(i,t)}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Qo=l((e=n(u),o=n(at))=>e.pipe(m(O.getArticle),h(({slug:t})=>o.getArticle(t).pipe(c(r=>O.getArticleSuccess({article:r})),g(()=>d(O.getArticleFailure()))))),{functional:!0}),qo=l((e=n(u),o=n(at))=>e.pipe(m(O.createArticle),h(({request:t})=>(console.log("create article effect",t),o.createArticle(t).pipe(c(r=>O.createArticleSuccess({article:r})),g(r=>d(O.createArticleFailure({errors:r.error.errors}))))))),{functional:!0}),ti=l((e=n(u),o=n(G))=>e.pipe(m(O.createArticleSuccess),j(({article:t})=>{o.navigate(["/articles",t.slug])})),{functional:!0,dispatch:!1}),ei=l((e=n(u),o=n(at))=>e.pipe(m(O.updateArticle),h(({request:t,slug:r})=>o.updateArticle(r,t).pipe(c(i=>O.updateArticleSuccess({article:i})),g(i=>d(O.updateArticleFailure({errors:i.error.errors})))))),{functional:!0}),ri=l((e=n(u),o=n(G),t=n(Y),r=n(St))=>e.pipe(m(O.updateArticleSuccess),j(({article:i})=>{console.log("editArticle->effects",i),t.dispatch(Er.toggleDrawerClose()),r.success("Article updated successfully."),setTimeout(()=>{location.reload()},1e3)})),{functional:!0,dispatch:!1}),oi=l((e=n(u),o=n(at))=>e.pipe(m(O.deleteArticle),h(({slug:t})=>o.deleteArticle(t).pipe(c(()=>O.deleteArticleSuccess()),g(()=>d(O.deleteArticleFailure()))))),{functional:!0}),ii=l((e=n(u),o=n(G),t=n(gt))=>e.pipe(m(O.deleteArticleSuccess),j(()=>{let r=t.success({nzTitle:"Article was successfully deleted!"});setTimeout(()=>{r.destroy(),o.navigateByUrl("/")},2e3)})),{functional:!0,dispatch:!1}),ni=l((e=n(u),o=n(Lr))=>e.pipe(m(O.createArticleFailure),j(({errors:t})=>{let r=Object.keys(t)[1],i=t[r].toString();o.error("Error Article",i,{nzDuration:3e3,nzPlacement:"topLeft"})})),{functional:!0,dispatch:!1});var ie={};B(ie,{getPopularTagsEffect:()=>si});var ho=(()=>{class e{constructor(t){this.http=t}getPopularTags(){let t=C.apiUrl+"/tags";return this.http.get(t).pipe(c(r=>r.data))}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var si=l((e=n(u),o=n(ho))=>e.pipe(m(yt.getPopularTags),h(()=>o.getPopularTags().pipe(c(t=>yt.getPopularTagsSuccess({popularTags:t})),g(()=>d(yt.getPopularTagsFailure()))))),{functional:!0});var ne={};B(ne,{addToFavoritesEffect:()=>ci});var wt=(()=>{class e{constructor(t){this.http=t}addToFavorites(t){let r=this.getUrl(t);return this.http.post(r,{}).pipe(c(this.getArticle))}removeFromFavorites(t){let r=this.getUrl(t);return this.http.delete(r).pipe(c(this.getArticle))}getUrl(t){return`${C.apiUrl}/articles/${t}/favorite`}getArticle(t){return t.article}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})();var ci=l((e=n(u),o=n(wt))=>e.pipe(m(At.addToFavorites),h(({isFavorited:t,slug:r})=>(t?o.removeFromFavorites(r):o.addToFavorites(r)).pipe(c(s=>At.addToFavoritesSuccess({article:s})),g(()=>d(At.addToFavoritesFailure()))))),{functional:!0});var se={};B(se,{getUserProfileEffect:()=>ai});var Mt=(()=>{class e{constructor(t){this.http=t}getUserProfile(t){let r=`${C.apiUrl}/profiles/${t}`;return this.http.get(r).pipe(c(i=>i.profile))}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})();var ai=l((e=n(u),o=n(Mt))=>e.pipe(m(Ct.getUserProfile),h(({username:t})=>o.getUserProfile(t).pipe(c(r=>(console.log(r),Ct.getUserProfileSuccess({userProfile:r}))),g(()=>d(Ct.getUserProfileFailure()))))),{functional:!0});var ce={};B(ce,{followUserEffect:()=>pi});var Ut=(()=>{class e{constructor(t){this.http=t}followUser(t){let r=this.getUrl(t);return this.http.post(r,[]).pipe(c(i=>i.profile))}unFollowUser(t){let r=this.getUrl(t);return this.http.delete(r).pipe(c(i=>i.profile))}getUrl(t){return`${C.apiUrl}/profiles/${t}/follow`}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var pi=l((e=n(u),o=n(Ut))=>e.pipe(m(Et.followUser),h(({isFollowing:t,username:r})=>(t?o.unFollowUser(r):o.followUser(r)).pipe(c(s=>Et.followUserSuccess({profile:s})),g(()=>d(Et.followUserFailure()))))),{functional:!0});var ae={};B(ae,{commentEffect:()=>ui,deleteCommentEffect:()=>fi,getCommentsEffect:()=>li,reloadAfterCommentEffect:()=>di,updateCommentEffect:()=>mi});var ot=(()=>{class e{constructor(t){this.http=t}commentArticle(t){let r=t.comment.slug,i=`${C.apiUrl}/articles/${r}/comment`;return this.http.post(i,t)}getComments(t,r){let i=`${C.apiUrl}/articles/${r}/comments`,s={articleId:t};return this.http.get(i,{params:s})}updateComment(t){let r=t.comment.slug,i=`${C.apiUrl}/articles/${r}/comment`;return this.http.patch(i,t)}deleteComment(t,r){let i=`${C.apiUrl}/articles/${r}/comment/${t}`;return this.http.delete(i)}getUrl(t){return`${C.apiUrl}/articles/${t}`}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})();var li=l((e=n(u),o=n(ot))=>e.pipe(m(N.getComment),h(({articleId:t,slug:r})=>o.getComments(t,r).pipe(c(i=>N.getCommentSuccess({data:i})),g(()=>d(N.getCommentFailure()))))),{functional:!0}),ui=l((e=n(u),o=n(ot))=>e.pipe(m(N.commentArticle),h(({request:t})=>o.commentArticle(t).pipe(c(r=>N.commentArticleSuccess({comment:r})),g(r=>d(N.commentArticleFailure({errors:r.error.errors})))))),{functional:!0}),mi=l((e=n(u),o=n(ot))=>e.pipe(m(N.updateCommentArticle),h(({request:t})=>o.updateComment(t).pipe(c(r=>N.updateCommentArticleSuccess({comment:r})),g(r=>d(N.commentArticleFailure({errors:r.error.errors})))))),{functional:!0}),fi=l((e=n(u),o=n(ot))=>e.pipe(m(N.deleteComment),h(({commentId:t,slug:r})=>o.deleteComment(t,r).pipe(c(i=>N.deleteCommentSuccess({comment:i})),g(i=>d(N.deleteCommentFailure()))))),{functional:!0}),di=l((e=n(u),o=n(Y))=>e.pipe(m(N.commentArticleSuccess,N.deleteCommentSuccess),j(({comment:t})=>{o.dispatch(N.getComment({articleId:t.article_id,slug:t.slug}))})),{functional:!0,dispatch:!1});var pe={};B(pe,{dislikeCommentEffect:()=>gi,likeCommentEffect:()=>hi});var pt=(()=>{class e{constructor(t){this.http=t}likeComment(t){let{slug:r}=t,i=this.getUrl(r)+"/like-comment";return this.http.post(i,t).pipe(c(this.getLikeResponse))}dislikeComment(t){let{slug:r}=t,i=this.getUrl(r)+"/dislike-comment";return this.http.post(i,t).pipe(c(this.getLikeResponse))}getUrl(t){return`${C.apiUrl}/articles/${t}`}getLikeResponse(t){return t}static{this.\u0275fac=function(r){return new(r||e)(v(M))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac})}}return e})();var hi=l((e=n(u),o=n(pt))=>e.pipe(m(D.likeComment),h(({request:t})=>o.likeComment(t).pipe(c(i=>D.likeCommentSuccess({data:i})),g(()=>d(D.likeCommentFailure()))))),{functional:!0}),gi=l((e=n(u),o=n(pt))=>e.pipe(m(D.dislikeComment),h(({request:t})=>o.dislikeComment(t).pipe(c(i=>D.dislikeCommentSuccess({data:i})),g(()=>d(D.dislikeCommentFailure()))))),{functional:!0});var le={};B(le,{clearNotificationsEffect:()=>Si,getNotificationCountEffect:()=>yi});var yi=l((e=n(u),o=n(Z))=>e.pipe(m(et.getNotificationCount),h(()=>o.getNotificationBadge().pipe(c(t=>(console.log("notification count -> ",t),et.getNotificationCountSuccess({data:t}))),g(()=>d(et.getNotificationCountFailure()))))),{functional:!0}),Si=l((e=n(u),o=n(G),t=n(Y))=>e.pipe(m(z.clearNotifications),j(()=>{t.dispatch(et.resetNotificationCount())})),{functional:!0,dispatch:!1});var ue={};B(ue,{clearUserNotifications:()=>Ci,getUserNotificationsEffect:()=>Ai,getUserNotificationsLoadMoreEffect:()=>vi});var Ai=l((e=n(u),o=n(Z))=>e.pipe(m(z.getNotifications),h(({limit:t,offset:r})=>o.getUserNotifications(t,r).pipe(c(i=>z.getNotificationsSuccess({data:i})),g(()=>d(z.getNotificationsFailure()))))),{functional:!0}),vi=l((e=n(u),o=n(Z))=>e.pipe(m(z.getNotificationsLoadMore),h(({limit:t,offset:r})=>o.getUserNotifications(t,r).pipe(c(i=>z.getNotificationsLoadMoreSuccess({data:i})),g(()=>d(z.getNotificationsLoadMoreFailure()))))),{functional:!0}),Ci=l((e=n(u),o=n(Z))=>e.pipe(m(z.clearNotifications),h(()=>o.clearUserNotifications().pipe(c(t=>z.clearNotificationsSuccess({data:t?.data,message:t?.message})),g(()=>d(z.clearNotificationsFailure()))))),{functional:!0});var go=(e,o)=>{let r=n(rt).get("BVaccessToken");return e=e.clone({setHeaders:{Authorization:r?`Bearer ${r}`:""}}),o(e)};var yo={isLoading:!1,error:null,data:[]},Ei=ar({name:"react comment",reducer:lr(yo,Q(D.likeComment,e=>L($({},e),{isLoading:!0})),Q(D.likeCommentSuccess,(e,o)=>L($({},e),{isLoading:!1,data:o})),Q(D.likeCommentFailure,e=>L($({},e),{isLoading:!1})),Q(D.dislikeComment,e=>L($({},e),{isLoading:!0})),Q(D.dislikeCommentSuccess,(e,o)=>L($({},e),{isLoading:!1,data:o})),Q(D.dislikeCommentFailure,e=>L($({},e),{isLoading:!1})),Q(ur,()=>yo))}),{name:So,reducer:Ao,selectIsLoading:$s,selectError:Ls,selectData:zs}=Ei;Le(_r);var vo={providers:[Dt(_e([go])),Pe({eventCoalescing:!0}),Ve(mo,Je({onSameUrlNavigation:"ignore"})),pr({router:mr}),fr(),R(yr,Sr),R(Nr,kr),R(Fr,br),R(Ir,xr),R(wr,Mr),R(Dr,Pr),R($t,Lt),R($t,Lt),R(Ur,Or),R(So,Ao),R(vr,Cr),R(Rr,$r),dr(re,ee,oe,ie,ne,se,ce,ae,pe,le,ue),zr(),qe(Qe),mt(tr),Br(),Dt(),uo({maxAge:25,logOnly:!Re(),autoPause:!0,trace:!1,traceLimit:75}),Tr,wt,Mt,Ut,gt,ot,pt,Z,jr]};var Co=(()=>{class e{constructor(t,r){this.store=t,this.notificationService=r,this.isCollapsed=!1}ngOnInit(){this.store.dispatch(w.getCurrentUser()),this.store.dispatch(et.getNotificationCount()),this.currentUserSubscription=this.store.pipe(cr(Ar),X(Boolean)).subscribe(t=>{console.log("app component current user ->",t);let r=t.id;this.notificationService.registerUser(r),this.notificationService.listenForNotifications()})}ngOnDestroy(){this.currentUserSubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(jt(Y),jt(Z))}}static{this.\u0275cmp=Fe({type:e,selectors:[["app-root"]],standalone:!0,features:[De],decls:1,vars:0,template:function(r,i){r&1&&je(0,"router-outlet")},dependencies:[ze,Ke,dt,gr,hr]})}}return e})();He(Co,vo).catch(e=>console.error(e));
