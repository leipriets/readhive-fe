import{a as C,d as ct,e as st,f as lt,g as mt,i as _t}from"./chunk-SN7MFPD5.js";import{b as Z,d as tt,e as et,f as it,g as nt,h as ot,i as at,j as rt}from"./chunk-WAJLGKOS.js";import{b as Q,f as Y}from"./chunk-O5NCEMTT.js";import{h as U,i as X}from"./chunk-PENA6MT2.js";import{a as j,b as G,c as W}from"./chunk-VPV7UKSS.js";import{Ka as V,Nb as q,Ob as H,Pb as J,Rb as K,fa as $,ga as B}from"./chunk-KYAOKWVV.js";import{$b as z,Ac as P,Bc as O,Dc as u,Gb as l,Ia as h,Ja as I,Kb as m,Sb as p,Tb as y,Vb as M,Wb as E,Xb as c,Yb as r,Zb as x,_b as N,ac as d,bc as S,dc as k,fc as s,jd as R,ld as A,md as b,nc as f,oc as a,pb as n,pc as _,qb as v,qc as D,qd as w,v as L,wa as T,wc as F}from"./chunk-DZ3RKEIN.js";function pt(e,o){e&1&&d(0)}function ft(e,o){if(e&1&&l(0,pt,1,0,"ng-container",11),e&2){s(4);let t=f(3);m("ngTemplateOutlet",t)}}function dt(e,o){e&1&&d(0)}function gt(e,o){if(e&1&&l(0,dt,1,0,"ng-container",11),e&2){s(4);let t=f(5);m("ngTemplateOutlet",t)}}function xt(e,o){if(e&1&&(a(0," - "),c(1,"span"),a(2),r()),e&2){let t=s(2).$implicit,i=s(2);n(2),_(i.extractMsgPart(t.message_parts,"title"))}}function ut(e,o){if(e&1&&(c(0,"div")(1,"span")(2,"strong"),a(3),r()(),a(4,"\xA0"),c(5,"i"),a(6),r(),a(7,"\xA0 "),l(8,ft,1,1,"ng-container")(9,gt,1,1,"ng-container")(10,xt,3,1,"span"),r()),e&2){let t=s().$implicit,i=s(2);n(3),_(t.actors[0]==null?null:t.actors[0].username),n(3),_(i.extractMsgPart(t.message_parts,"message")),n(2),p(t.type==="reacted_comment"&&i.extractMsgPart(t.message_parts,"content")=="liked"?8:-1),n(),p(t.type==="reacted_comment"&&i.extractMsgPart(t.message_parts,"content")=="disliked"?9:-1),n(),p(t.type!=="followed_profile"?10:-1)}}function Ct(e,o){e&1&&d(0)}function vt(e,o){if(e&1&&l(0,Ct,1,0,"ng-container",11),e&2){s(4);let t=f(3);m("ngTemplateOutlet",t)}}function Nt(e,o){e&1&&d(0)}function zt(e,o){if(e&1&&l(0,Nt,1,0,"ng-container",11),e&2){s(4);let t=f(5);m("ngTemplateOutlet",t)}}function Lt(e,o){if(e&1&&(c(0,"div")(1,"span")(2,"strong"),a(3),r()(),a(4," and "),c(5,"span")(6,"strong"),a(7),r()(),c(8,"i"),a(9),r(),a(10,"\xA0 "),l(11,vt,1,1,"ng-container")(12,zt,1,1,"ng-container"),a(13," - "),c(14,"span"),a(15),r()()),e&2){let t=s().$implicit,i=s(2);n(3),_(t.actors[0]==null?null:t.actors[0].username),n(4),_(t.actors[1]==null?null:t.actors[1].username),n(2),_(i.extractMsgPart(t.message_parts,"message")),n(2),p(t.type==="reacted_comment"&&i.extractMsgPart(t.message_parts,"content")=="liked"?11:-1),n(),p(t.type==="reacted_comment"&&i.extractMsgPart(t.message_parts,"content")=="disliked"?12:-1),n(3),_(i.extractMsgPart(t.message_parts,"title"))}}function Tt(e,o){e&1&&d(0)}function ht(e,o){if(e&1&&l(0,Tt,1,0,"ng-container",11),e&2){s(4);let t=f(3);m("ngTemplateOutlet",t)}}function It(e,o){e&1&&d(0)}function yt(e,o){if(e&1&&l(0,It,1,0,"ng-container",11),e&2){s(4);let t=f(5);m("ngTemplateOutlet",t)}}function Mt(e,o){if(e&1&&(N(0),c(1,"span")(2,"strong"),a(3),r()(),a(4," and "),c(5,"span"),a(6),r(),c(7,"span"),a(8),r(),l(9,ht,1,1,"ng-container")(10,yt,1,1,"ng-container"),a(11," - "),c(12,"span"),a(13),r(),z()),e&2){let t=s().$implicit,i=s(2);n(3),_(t.actors[0].username),n(3),D("",t.actors.length-1," others "),n(2),_(i.extractMsgPart(t.message_parts,"message")),n(),p(t.type==="reacted_comment"&&i.extractMsgPart(t.message_parts,"content")=="liked"?9:-1),n(),p(t.type==="reacted_comment"&&i.extractMsgPart(t.message_parts,"content")=="disliked"?10:-1),n(3),_(i.extractMsgPart(t.message_parts,"title"))}}function Et(e,o){if(e&1&&(c(0,"nz-list-item")(1,"nz-list-item-meta",9)(2,"nz-list-item-meta-description"),l(3,ut,11,5,"div",3)(4,Lt,16,6,"div",3)(5,Mt,14,6,"ng-container",3),r()(),c(6,"ul",10)(7,"nz-list-item-action"),a(8),r()()()),e&2){let t=o.$implicit,i=s(2);n(),m("nzAvatar",t.actors[0]==null?null:t.actors[0].image),n(2),m("ngIf",t.actors.length===1),n(),m("ngIf",t.actors.length===2),n(),m("ngIf",t.actors.length>2),n(3),_(i.getTimeDiff(t.updatedAt))}}function St(e,o){if(e&1){let t=S();c(0,"div",12)(1,"button",13),k("click",function(){h(t);let g=s(2);return I(g.onLoadMore())}),a(2,"loading more"),r()()}}function kt(e,o){e&1&&(c(0,"nz-list"),x(1,"nz-list-empty"),r())}function Dt(e,o){if(e&1&&(N(0),c(1,"div",4)(2,"div",5)(3,"nz-card",6)(4,"nz-list",7),M(5,Et,9,5,"nz-list-item",null,y),r(),l(7,St,3,0,"div",8)(8,kt,2,0,"ng-template",null,2,u),r()()(),z()),e&2){let t=o.ngIf,i=f(9);n(5),E(t==null||t.notifData==null?null:t.notifData.data),n(2),m("ngIf",t.actionData.length>0)("ngIfElse",i)}}function Ft(e,o){e&1&&x(0,"span",14)}function Pt(e,o){e&1&&x(0,"span",15)}var ie=(()=>{class e{constructor(t,i){this.store=t,this.notificationService=i,this.data$=L({isLoading:this.store.select(ct),error:this.store.select(st),notifData:this.store.select(lt),actionData:this.store.select(mt)}),this.notifContent="",this.limit=5,this.offset=0}ngOnInit(){this.store.dispatch(C.getNotifications({limit:this.limit,offset:this.offset})),this.store.dispatch(C.clearNotifications())}extractMsgPart(t,i){return this.notificationService.extractMsgParts(t,i)}onLoadMore(){this.offset+=5,this.store.dispatch(C.getNotificationsLoadMore({limit:this.limit,offset:this.offset}))}getTimeDiff(t){return Y(t)}ngOnDestroy(){this.notifSubs?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)(v(V),v(_t))}}static{this.\u0275cmp=T({type:e,selectors:[["app-notification-list"]],standalone:!0,features:[F],decls:6,vars:3,consts:[["likeReact",""],["dislikedReact",""],["emptyNotification",""],[4,"ngIf"],["nz-row",""],["nz-col","","nzSpan","12","nzOffset","6"],["nzTitle","Notifications"],["nzItemLayout","horizontal"],["class","loadmore",4,"ngIf","ngIfElse"],[3,"nzAvatar"],["nz-list-item-actions",""],[4,"ngTemplateOutlet"],[1,"loadmore"],["nz-button","",3,"click"],["nz-icon","","nzType","like"],["nz-icon","","nzType","dislike"]],template:function(i,g){i&1&&(l(0,Dt,10,2,"ng-container",3),P(1,"async"),l(2,Ft,1,0,"ng-template",null,0,u)(4,Pt,1,0,"ng-template",null,1,u)),i&2&&m("ngIf",O(1,1,g.data$))},dependencies:[w,R,A,b,K,J,q,H,rt,ot,nt,at,tt,Z,it,et,W,G,j,X,U,B,$,Q],styles:[".loadmore[_ngcontent-%COMP%]{text-align:center;margin-top:12px;height:32px;line-height:32px}"]})}}return e})();export{ie as a};
