import{a as me,b as ce,c as le,d as ue}from"./chunk-KBK4WJI4.js";import{a as xe}from"./chunk-ZDOJNOAD.js";import{k as Se,l as Pe}from"./chunk-OHBQIQUY.js";import{c as de,e as ge}from"./chunk-Z4BHWU3Z.js";import{b as ne,c as oe}from"./chunk-VXXMYUI5.js";import{e as ve,f as ye,h as Te,i as Ie}from"./chunk-PENA6MT2.js";import{a as _e,d as he,e as ze,f as Ce}from"./chunk-KDUSOC5H.js";import{i as re,j as ae,k as pe,m as se}from"./chunk-OWTQ6K3K.js";import{c as ie}from"./chunk-VPV7UKSS.js";import{U as fe,d as X,h as Y,k as Z,q as ee}from"./chunk-GN2DYACI.js";import{Ka as te,fa as K,ga as Q,o as w,p as J}from"./chunk-KYAOKWVV.js";import{$b as R,Ac as G,Bc as $,Dc as x,G as F,Gb as m,Ia as d,J as O,Ja as g,Kb as r,Tb as S,Vb as P,Wb as v,Xb as a,Yb as p,Zb as l,_b as j,bc as E,da as L,dc as V,f as A,fc as _,jd as M,md as H,nc as h,oc as y,p as b,pb as o,pc as T,qb as c,qd as N,sc as q,tc as B,uc as U,v as D,wa as C,wc as I,xc as W,yc as k}from"./chunk-DZ3RKEIN.js";var Ee=()=>({rows:1});function Ve(e,s){if(e&1&&(a(0,"nz-auto-option"),l(1,"nz-skeleton",6),p()),e&2){let t=_();o(),r("nzLoading",t.searchingProfile)("nzActive",t.searchingProfile)("nzParagraph",W(3,Ee))}}function ke(e,s){if(e&1){let t=E();a(0,"nz-auto-option",7),V("click",function(){d(t);let n=_();return g(n.onSelect())}),y(1),p()}if(e&2){let t=s.$implicit;r("nzValue",t.username),o(),T(t.username)}}function Ae(e,s){e&1&&l(0,"span",8)}var Me=(()=>{class e{constructor(t,i){this.searchService=t,this.router=i,this.searchSubject=new A,this.options=[],this.searchingProfile=!1,this.searchSubscription=this.searchSubject.pipe(O(300),L(n=>n.trim()?this.searchService.getUserProfile(n).pipe(F(()=>b([]))):b([]))).subscribe(n=>{this.options=n,this.searchingProfile=!1})}ngOnInit(){}onInput(t){let i=t.target.value;this.searchingProfile=!0,this.searchSubject.next(i)}onSelect(){this.inputValue&&this.router.navigate([`/profile/${this.inputValue}`],{queryParams:{tab:"posts"}})}ngOnDestroy(){this.searchSubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)(c(xe),c(w))}}static{this.\u0275cmp=C({type:e,selectors:[["app-search-profile"]],standalone:!0,features:[I],decls:9,vars:4,consts:[["auto",""],["suffixIconSearch",""],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Search user profile",3,"ngModelChange","input","keydown.enter","ngModel","nzAutocomplete"],[4,"ngIf"],[3,"nzValue"],[3,"nzLoading","nzActive","nzParagraph"],[3,"click","nzValue"],["nz-icon","","nzType","search"]],template:function(i,n){if(i&1){let u=E();a(0,"nz-input-group",2)(1,"input",3),U("ngModelChange",function(f){return d(u),B(n.inputValue,f)||(n.inputValue=f),g(f)}),V("input",function(f){return d(u),g(n.onInput(f))})("keydown.enter",function(){return d(u),g(n.onSelect())}),p()(),a(2,"nz-autocomplete",null,0),m(4,Ve,2,4,"nz-auto-option",4),P(5,ke,2,2,"nz-auto-option",5,S),p(),m(7,Ae,1,0,"ng-template",null,1,x)}if(i&2){let u=h(3),z=h(8);r("nzSuffix",z),o(),q("ngModel",n.inputValue),r("nzAutocomplete",u),o(3),r("ngIf",n.searchingProfile),o(),v(n.options)}},dependencies:[N,M,ee,X,Y,Z,Q,K,se,re,pe,ae,ue,le,me,ce,ye,ve],styles:[".input-search[_ngcontent-%COMP%]{width:250px}"]})}}return e})();var De=e=>["/tags",e],Fe=e=>({tab:e});function Oe(e,s){e&1&&(a(0,"div"),l(1,"app-search-profile")(2,"br")(3,"br"),p())}function Le(e,s){if(e&1&&(a(0,"nz-tag",6)(1,"a",7),y(2),p()()),e&2){let t=s.$implicit;o(),r("routerLink",k(3,De,t))("queryParams",k(5,Fe,t)),o(),T(t)}}function je(e,s){if(e&1&&(a(0,"div"),P(1,Le,3,7,"nz-tag",6,S),p()),e&2){let t=_().ngIf;o(),v(t.popularTags)}}function Re(e,s){e&1&&l(0,"nz-empty",8)}function qe(e,s){if(e&1&&(j(0),a(1,"div",3),m(2,Oe,4,0,"div",2),a(3,"nz-card",4),m(4,je,3,0,"div",5),p(),m(5,Re,1,0,"ng-template",null,0,x),p(),R()),e&2){let t=s.ngIf,i=h(6);o(2),r("ngIf",t.currentUser),o(2),r("ngIf",t.popularTags.length>0)("ngIfElse",i)}}var Ct=(()=>{class e{constructor(t,i){this.store=t,this.router=i,this.data$=D({popularTags:this.store.select(Ce),isLoading:this.store.select(he),error:this.store.select(ze),currentUser:this.store.select(fe)})}ngOnInit(){this.store.dispatch(_e.getPopularTags())}doSomething(t){this.router.navigate(["/tags",t],{queryParams:{tab:t}})}static{this.\u0275fac=function(i){return new(i||e)(c(te),c(w))}}static{this.\u0275cmp=C({type:e,selectors:[["app-popular-tags"]],standalone:!0,features:[I],decls:3,vars:4,consts:[["noData",""],[3,"nzOffsetTop"],[4,"ngIf"],[1,"container-popular-tags","hide-on-mobile"],["nzTitle","Popular Tags"],[4,"ngIf","ngIfElse"],["nzColor","#818a91",1,"mt-5"],[3,"routerLink","queryParams"],["nzNotFoundImage","simple"]],template:function(i,n){i&1&&(a(0,"nz-affix",1),m(1,qe,7,3,"ng-container",2),G(2,"async"),p()),i&2&&(r("nzOffsetTop",70),o(),r("ngIf",$(2,2,n.data$)))},dependencies:[N,M,H,J,Pe,Se,Ie,Te,oe,ne,ie,ge,de,Me],styles:[".container-popular-tags[_ngcontent-%COMP%]{padding-top:2.75rem}.tag-bg-color-default[_ngcontent-%COMP%]{background-color:#818a91}.mt-5[_ngcontent-%COMP%]{margin-top:5px}@media (max-width: 575.98px){.hide-on-mobile[_ngcontent-%COMP%]{display:none!important}}"]})}}return e})();export{Ct as a};
