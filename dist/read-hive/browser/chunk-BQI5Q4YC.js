import{a as u,d as st,e as lt,f as mt,g as _t,i as pt}from"./chunk-BL7EFC2P.js";import{b as tt,d as et,e as it,f as nt,g as ot,h as at,i as rt,j as ct}from"./chunk-SROZ3KJA.js";import{b as K,g as Z}from"./chunk-Z4BHWU3Z.js";import{e as Q,f as U,h as X,i as Y}from"./chunk-PENA6MT2.js";import{c as G}from"./chunk-VPV7UKSS.js";import{Ka as V,Nb as W,Ob as q,Pb as H,Rb as J,fa as B,ga as j}from"./chunk-KYAOKWVV.js";import{$b as N,Ac as A,Bc as O,Dc as z,Gb as l,Ia as T,Ja as y,Kb as m,Sb as p,Tb as I,Vb as M,Wb as S,Xb as c,Yb as r,Zb as g,_b as v,ac as d,bc as E,dc as k,fc as s,jd as R,ld as b,md as $,nc as f,oc as a,pb as i,pc as _,qb as C,qc as F,qd as w,v as L,wa as h,wc as D,xc as P}from"./chunk-DZ3RKEIN.js";var dt=()=>({rows:6});function ft(e,o){e&1&&d(0)}function gt(e,o){if(e&1&&l(0,ft,1,0,"ng-container",11),e&2){s(4);let t=f(3);m("ngTemplateOutlet",t)}}function xt(e,o){e&1&&d(0)}function ut(e,o){if(e&1&&l(0,xt,1,0,"ng-container",11),e&2){s(4);let t=f(5);m("ngTemplateOutlet",t)}}function Ct(e,o){if(e&1&&(a(0," - "),c(1,"span"),a(2),r()),e&2){let t=s(2).$implicit,n=s(2);i(2),_(n.extractMsgPart(t.message_parts,"title"))}}function vt(e,o){if(e&1&&(c(0,"div")(1,"span")(2,"strong"),a(3),r()(),a(4,"\xA0"),c(5,"i"),a(6),r(),a(7,"\xA0 "),l(8,gt,1,1,"ng-container")(9,ut,1,1,"ng-container")(10,Ct,3,1,"span"),r()),e&2){let t=s().$implicit,n=s(2);i(3),_(t.actors[0]==null?null:t.actors[0].username),i(3),_(n.extractMsgPart(t.message_parts,"message")),i(2),p(t.type==="reacted_comment"&&n.extractMsgPart(t.message_parts,"content")=="liked"?8:-1),i(),p(t.type==="reacted_comment"&&n.extractMsgPart(t.message_parts,"content")=="disliked"?9:-1),i(),p(t.type!=="followed_profile"?10:-1)}}function Nt(e,o){e&1&&d(0)}function zt(e,o){if(e&1&&l(0,Nt,1,0,"ng-container",11),e&2){s(4);let t=f(3);m("ngTemplateOutlet",t)}}function Lt(e,o){e&1&&d(0)}function ht(e,o){if(e&1&&l(0,Lt,1,0,"ng-container",11),e&2){s(4);let t=f(5);m("ngTemplateOutlet",t)}}function Tt(e,o){if(e&1&&(c(0,"div")(1,"span")(2,"strong"),a(3),r()(),a(4," and "),c(5,"span")(6,"strong"),a(7),r()(),c(8,"i"),a(9),r(),a(10,"\xA0 "),l(11,zt,1,1,"ng-container")(12,ht,1,1,"ng-container"),a(13," - "),c(14,"span"),a(15),r()()),e&2){let t=s().$implicit,n=s(2);i(3),_(t.actors[0]==null?null:t.actors[0].username),i(4),_(t.actors[1]==null?null:t.actors[1].username),i(2),_(n.extractMsgPart(t.message_parts,"message")),i(2),p(t.type==="reacted_comment"&&n.extractMsgPart(t.message_parts,"content")=="liked"?11:-1),i(),p(t.type==="reacted_comment"&&n.extractMsgPart(t.message_parts,"content")=="disliked"?12:-1),i(3),_(n.extractMsgPart(t.message_parts,"title"))}}function yt(e,o){e&1&&d(0)}function It(e,o){if(e&1&&l(0,yt,1,0,"ng-container",11),e&2){s(4);let t=f(3);m("ngTemplateOutlet",t)}}function Mt(e,o){e&1&&d(0)}function St(e,o){if(e&1&&l(0,Mt,1,0,"ng-container",11),e&2){s(4);let t=f(5);m("ngTemplateOutlet",t)}}function Et(e,o){if(e&1&&(v(0),c(1,"span")(2,"strong"),a(3),r()(),a(4," and "),c(5,"span"),a(6),r(),c(7,"span"),a(8),r(),l(9,It,1,1,"ng-container")(10,St,1,1,"ng-container"),a(11," - "),c(12,"span"),a(13),r(),N()),e&2){let t=s().$implicit,n=s(2);i(3),_(t.actors[0].username),i(3),F("",t.actors.length-1," others "),i(2),_(n.extractMsgPart(t.message_parts,"message")),i(),p(t.type==="reacted_comment"&&n.extractMsgPart(t.message_parts,"content")=="liked"?9:-1),i(),p(t.type==="reacted_comment"&&n.extractMsgPart(t.message_parts,"content")=="disliked"?10:-1),i(3),_(n.extractMsgPart(t.message_parts,"title"))}}function kt(e,o){if(e&1&&(c(0,"nz-list-item")(1,"nz-list-item-meta",9)(2,"nz-list-item-meta-description"),l(3,vt,11,5,"div",2)(4,Tt,16,6,"div",2)(5,Et,14,6,"ng-container",2),r()(),c(6,"ul",10)(7,"nz-list-item-action"),a(8),r()()()),e&2){let t=o.$implicit,n=s(2);i(),m("nzAvatar",t.actors[0]==null?null:t.actors[0].image),i(2),m("ngIf",t.actors.length===1),i(),m("ngIf",t.actors.length===2),i(),m("ngIf",t.actors.length>2),i(3),_(n.getTimeDiff(t.updatedAt))}}function Ft(e,o){if(e&1){let t=E();c(0,"div",12)(1,"button",13),k("click",function(){T(t);let x=s(2);return y(x.onLoadMore())}),a(2,"loading more"),r()()}}function Dt(e,o){e&1&&(c(0,"nz-list"),g(1,"nz-list-empty"),r())}function Pt(e,o){if(e&1&&(v(0),c(1,"div",3)(2,"div",4)(3,"nz-card",5)(4,"nz-list",6),M(5,kt,9,5,"nz-list-item",null,I),r(),l(7,Ft,3,0,"div",7),g(8,"br")(9,"nz-skeleton",8),l(10,Dt,2,0,"nz-list",2),r()()(),N()),e&2){let t=o.ngIf;i(5),S(t==null||t.notifData==null?null:t.notifData.data),i(2),m("ngIf",t.actionData.length>0),i(2),m("nzLoading",t.isLoading)("nzActive",t.isLoading)("nzParagraph",P(5,dt)),i(),m("ngIf",!t.isLoading&&t.actionData.length===0)}}function At(e,o){e&1&&g(0,"span",14)}function Ot(e,o){e&1&&g(0,"span",15)}var ae=(()=>{class e{constructor(t,n){this.store=t,this.notificationService=n,this.data$=L({isLoading:this.store.select(st),error:this.store.select(lt),notifData:this.store.select(mt),actionData:this.store.select(_t)}),this.notifContent="",this.limit=5,this.offset=0}ngOnInit(){this.store.dispatch(u.getNotifications({limit:this.limit,offset:this.offset})),this.store.dispatch(u.clearNotifications())}extractMsgPart(t,n){return this.notificationService.extractMsgParts(t,n)}onLoadMore(){this.offset+=5,this.store.dispatch(u.getNotificationsLoadMore({limit:this.limit,offset:this.offset}))}getTimeDiff(t){return Z(t)}ngOnDestroy(){this.notifSubs?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||e)(C(V),C(pt))}}static{this.\u0275cmp=h({type:e,selectors:[["app-notification-list"]],standalone:!0,features:[D],decls:6,vars:3,consts:[["likeReact",""],["dislikedReact",""],[4,"ngIf"],[1,"flex","sm:h-screen","justify-center"],[1,"flex-1","lg:pl-40","lg:pr-40"],["nzTitle","Notifications"],["nzItemLayout","horizontal"],["class","loadmore",4,"ngIf"],[3,"nzLoading","nzActive","nzParagraph"],[3,"nzAvatar"],["nz-list-item-actions",""],[4,"ngTemplateOutlet"],[1,"loadmore"],["nz-button","",3,"click"],["nz-icon","","nzType","like"],["nz-icon","","nzType","dislike"]],template:function(n,x){n&1&&(l(0,Pt,11,6,"ng-container",2),A(1,"async"),l(2,At,1,0,"ng-template",null,0,z)(4,Ot,1,0,"ng-template",null,1,z)),n&2&&m("ngIf",O(1,1,x.data$))},dependencies:[w,R,b,$,J,H,W,q,ct,at,ot,rt,et,tt,nt,it,G,Y,X,j,B,K,U,Q],styles:[".loadmore[_ngcontent-%COMP%]{text-align:center;margin-top:12px;height:32px;line-height:32px}"]})}}return e})();export{ae as a};
