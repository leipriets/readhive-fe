import{a as S,d as ft,e as dt,f as ut,g as _t,i as gt}from"./chunk-ADHBRLTQ.js";import{b as ot,d as at,e as rt,f as lt,g as mt,h as ct,i as st,j as pt}from"./chunk-WWSAG6DA.js";import{b as Y,g as it}from"./chunk-ZPB5WU26.js";import{e as Z,f as tt,h as et,i as nt}from"./chunk-RUYDGNTY.js";import{c as q}from"./chunk-T53K6S7Z.js";import{Ka as W,Nb as H,Ob as K,Pb as Q,Rb as X,fa as N,ga as T}from"./chunk-W7R43Y2J.js";import{$b as g,Ac as d,Bc as u,Dc as h,Gb as p,Ia as w,Ja as A,Kb as r,Sb as B,Tb as O,Vb as b,Wb as j,Xb as m,Yb as l,Zb as C,_b as _,ac as R,bc as V,dc as $,fc as s,jd as z,ld as J,md as U,nc as F,oc as o,pb as i,pc as I,qb as L,qc as f,qd as v,v as P,wa as x,wc as D,xc as G,za as k}from"./chunk-SSCO7BOT.js";var E=(()=>{class e{transform(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275pipe=k({name:"capitalizeFirst",type:e,pure:!0,standalone:!0})}}return e})();function zt(e,a){if(e&1&&(_(0),m(1,"strong"),o(2),d(3,"capitalizeFirst"),l(),g()),e&2){let t=s(2);i(2),f("",u(3,1,t.notifData==null?null:t.notifData.actors[0].username)," ")}}function vt(e,a){if(e&1&&(_(0),m(1,"strong"),o(2),d(3,"capitalizeFirst"),l(),o(4," and "),m(5,"strong"),o(6),d(7,"capitalizeFirst"),l(),g()),e&2){let t=s(2);i(2),f("",u(3,2,t.notifData==null?null:t.notifData.actors[0].username)," "),i(4),f("",u(7,4,t.notifData==null?null:t.notifData.actors[1].username)," ")}}function yt(e,a){if(e&1&&(_(0),m(1,"strong"),o(2),d(3,"capitalizeFirst"),l(),o(4," and others "),g()),e&2){let t=s(2);i(2),f("",u(3,1,t.notifData==null?null:t.notifData.actors[0].username)," ")}}function It(e,a){e&1&&R(0)}function Nt(e,a){if(e&1&&(_(0),p(1,It,1,0,"ng-container",3),g()),e&2){s(2);let t=F(2);i(),r("ngTemplateOutlet",t)}}function Tt(e,a){e&1&&R(0)}function St(e,a){if(e&1&&(_(0),p(1,Tt,1,0,"ng-container",3),g()),e&2){s(2);let t=F(4);i(),r("ngTemplateOutlet",t)}}function Et(e,a){if(e&1&&(_(0),p(1,zt,4,3,"ng-container",2)(2,vt,8,6,"ng-container",2)(3,yt,5,3,"ng-container",2),o(4),p(5,Nt,2,1,"ng-container",2)(6,St,2,1,"ng-container",2),o(7," \xA0 "),m(8,"i"),o(9),l(),g()),e&2){let t=s();i(),r("ngIf",(t.notifData==null?null:t.notifData.actors.length)===1),i(),r("ngIf",(t.notifData==null?null:t.notifData.actors.length)>1),i(),r("ngIf",(t.notifData==null?null:t.notifData.actors.length)>2),i(),f(" \xA0",t.message," "),i(),r("ngIf",t.commentReact==="liked"),i(),r("ngIf",t.commentReact==="disliked"),i(3),f("- ",t.comment,"")}}function Lt(e,a){e&1&&C(0,"span",4)}function Rt(e,a){e&1&&C(0,"span",5)}var xt=(()=>{class e{constructor(){this.message="reacted to your comment.",this.formattedNotifData=[],this.commentReact="",this.comment=""}ngOnInit(){this.handleNotifData()}handleNotifData(){let t=this.extractComment(this.notifData.message_parts);this.comment=t;let n=this.extractReactedCommentType(this.notifData.message_parts);this.commentReact=n}extractComment(t){let n=t.find(y=>y.type==="title"),c;return n&&"value"in n&&(c=n.value),c}extractReactedCommentType(t){let n=t.find(y=>y.type==="content"),c;return n&&"value"in n&&(c=n.value),c}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["reacted-comments"]],inputs:{notifData:"notifData"},standalone:!0,features:[D],decls:5,vars:1,consts:[["likeReact",""],["dislikedReact",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["nz-icon","","nzType","like"],["nz-icon","","nzType","dislike"]],template:function(n,c){n&1&&p(0,Et,10,7,"ng-container",2)(1,Lt,1,0,"ng-template",null,0,h)(3,Rt,1,0,"ng-template",null,1,h),n&2&&r("ngIf",(c.notifData==null?null:c.notifData.type)==="reacted_comment")},dependencies:[v,z,J,E,T,N],encapsulation:2})}}return e})();function Ft(e,a){if(e&1&&(m(0,"strong"),o(1),d(2,"capitalizeFirst"),l()),e&2){let t=s(2);i(),f("",u(2,1,t.notifData==null?null:t.notifData.actors[0].username)," ")}}function Mt(e,a){if(e&1&&(m(0,"strong"),o(1),d(2,"capitalizeFirst"),l(),o(3," and "),m(4,"strong"),o(5),d(6,"capitalizeFirst"),l()),e&2){let t=s(2);i(),f("",u(2,2,t.notifData==null?null:t.notifData.actors[0].username)," "),i(4),I(u(6,4,t.notifData==null?null:t.notifData.actors[1].username))}}function Pt(e,a){if(e&1&&(m(0,"strong"),o(1),d(2,"capitalizeFirst"),l(),o(3," and "),m(4,"strong"),o(5),l()),e&2){let t=s(2);i(),f("",u(2,2,t.notifData==null?null:t.notifData.actors[0].username)," "),i(4),f("",(t.notifData==null?null:t.notifData.actors.length)-1,"\xA0others")}}function kt(e,a){if(e&1&&(_(0),p(1,Ft,3,3,"strong")(2,Mt,7,6)(3,Pt,6,4),o(4),g()),e&2){let t=s();i(),B((t.notifData==null?null:t.notifData.actors.length)===1?1:(t.notifData==null?null:t.notifData.actors.length)===2?2:(t.notifData==null?null:t.notifData.actors.length)>2?3:-1),i(3),f(" \xA0",t.message,`
`)}}var Dt=(()=>{class e{constructor(){this.message="started following you."}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=x({type:e,selectors:[["followed-profile"]],inputs:{notifData:"notifData"},standalone:!0,features:[D],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,c){n&1&&p(0,kt,5,2,"ng-container",0),n&2&&r("ngIf",(c.notifData==null?null:c.notifData.type)==="followed_profile")},dependencies:[v,z,E],encapsulation:2})}}return e})();var wt=()=>({rows:6});function At(e,a){if(e&1&&(m(0,"nz-list-item")(1,"nz-list-item-meta",9)(2,"nz-list-item-meta-description"),C(3,"reacted-comments",10)(4,"followed-profile",10),l()(),m(5,"ul",11)(6,"nz-list-item-action"),o(7),l()()()),e&2){let t=a.$implicit,n=s(2);i(),r("nzAvatar",t.actors[0]==null?null:t.actors[0].image),i(2),r("notifData",t),i(),r("notifData",t),i(3),I(n.getTimeDiff(t.updatedAt))}}function Bt(e,a){if(e&1){let t=V();m(0,"div",12)(1,"button",13),$("click",function(){w(t);let c=s(2);return A(c.onLoadMore())}),o(2,"loading more"),l()()}}function Ot(e,a){e&1&&(m(0,"nz-list"),C(1,"nz-list-empty"),l())}function bt(e,a){if(e&1&&(_(0),m(1,"div",3)(2,"div",4)(3,"nz-card",5)(4,"nz-list",6),b(5,At,8,4,"nz-list-item",null,O),l(),p(7,Bt,3,0,"div",7),C(8,"br")(9,"nz-skeleton",8),p(10,Ot,2,0,"nz-list",2),l()()(),g()),e&2){let t=a.ngIf,n=s();i(5),j(t==null||t.notifData==null?null:t.notifData.data),i(2),r("ngIf",t.actionData.length>n.limit),i(2),r("nzLoading",t.isLoading)("nzActive",t.isLoading)("nzParagraph",G(5,wt)),i(),r("ngIf",!t.isLoading&&t.actionData.length===0)}}function jt(e,a){e&1&&C(0,"span",14)}function Vt(e,a){e&1&&C(0,"span",15)}var xe=(()=>{class e{constructor(t,n){this.store=t,this.notificationService=n,this.data$=P({isLoading:this.store.select(ft),error:this.store.select(dt),notifData:this.store.select(ut),actionData:this.store.select(_t)}),this.notifContent="",this.limit=5,this.offset=0}ngOnInit(){this.store.dispatch(S.getNotifications({limit:this.limit,offset:this.offset})),this.store.dispatch(S.clearNotifications())}extractMsgPart(t,n){let c=JSON.parse(t);return this.notificationService.extractMsgParts(c,n)}onLoadMore(){this.offset+=5,this.store.dispatch(S.getNotificationsLoadMore({limit:this.limit,offset:this.offset}))}getTimeDiff(t){return it(t)}ngOnDestroy(){this.notifSubs?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||e)(L(W),L(gt))}}static{this.\u0275cmp=x({type:e,selectors:[["app-notification-list"]],standalone:!0,features:[D],decls:6,vars:3,consts:[["likeReact",""],["dislikedReact",""],[4,"ngIf"],[1,"flex","sm:h-screen","justify-center"],[1,"flex-1","lg:pl-40","lg:pr-40"],["nzTitle","Notifications"],["nzItemLayout","horizontal"],["class","loadmore",4,"ngIf"],[3,"nzLoading","nzActive","nzParagraph"],[3,"nzAvatar"],[3,"notifData"],["nz-list-item-actions",""],[1,"loadmore"],["nz-button","",3,"click"],["nz-icon","","nzType","like"],["nz-icon","","nzType","dislike"]],template:function(n,c){n&1&&(p(0,bt,11,6,"ng-container",2),d(1,"async"),p(2,jt,1,0,"ng-template",null,0,h)(4,Vt,1,0,"ng-template",null,1,h)),n&2&&r("ngIf",u(1,1,c.data$))},dependencies:[v,z,U,X,Q,H,K,pt,ct,mt,st,at,ot,lt,rt,q,nt,et,T,N,Y,tt,Z,xt,Dt],styles:[".loadmore[_ngcontent-%COMP%]{text-align:center;margin-top:12px;height:32px;line-height:32px}"]})}}return e})();export{xe as a};
