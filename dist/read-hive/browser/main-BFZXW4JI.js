import{a as zt,b as _t,f as It}from"./chunk-LZDVCVOI.js";import{a as z,b as Dr,c as $r,h as xt,i as G}from"./chunk-ADHBRLTQ.js";import{a as Ct}from"./chunk-SQ3EOYQT.js";import{a as it}from"./chunk-EURF2ZRH.js";import{e as gr,f as vr,g as Er,i as et}from"./chunk-IQBM7JAF.js";import{a as tt}from"./chunk-ZRJDHZVS.js";import{a as jr}from"./chunk-EV7LIJFU.js";import{a as Et,b as Ur,c as kr}from"./chunk-LAJZP7FY.js";import"./chunk-NU526JQJ.js";import{B as U,C as Nr,D as Or,I as P,J as vt,a as u,b as l,c as m,d as dr,e as Cr,f as Ir,g as xr,i as Tr,j as N,k as Fr,l as br,s as yt,v as St,w as wr,x as Mr}from"./chunk-S6VRG45Q.js";import{a as Pr,b as Rr}from"./chunk-IWAICX4R.js";import"./chunk-7WXAKD5W.js";import{d as At}from"./chunk-I4I4YYSC.js";import{H as hr,P as w,Q as yr,R as Sr,U as Ar,q as tr}from"./chunk-X5J5AAS6.js";import{Aa as $t,Ba as gt,Ca as rr,Fa as or,Ga as ir,Ha as Lt,Ia as nr,Ja as sr,Ka as Y,La as cr,Na as ar,Oa as D,Pa as pr,Qa as Q,Ra as ur,Sb as I,Ta as lr,Ua as mr,Va as fr,e as O,f as Dt,g as _e,ga as ht,h as Be,i as Ke,n as He,o as J,oa as Qe,pa as qe,q as Ve,r as Je,s as Ge,t as Ze,u as We,v as Xe,va as er,w as Ye}from"./chunk-W7R43Y2J.js";import{$ as Ce,$a as Me,Aa as mt,Ba as ft,D as Pt,E as X,G as g,H as Se,J as Ae,Jc as Re,L as ve,Lc as De,Ma as be,Sa as dt,Ta as we,Yc as $e,Zb as je,_ as Ee,ba as Ie,c as jt,da as h,ea as lt,fd as Le,ga as j,h as de,ia as xe,j as he,ja as Te,l as ge,la as T,n as ye,oa as q,p as d,qa as v,qb as Rt,qd as ze,ra as n,rb as Ne,t as ut,tb as Oe,u as c,vb as Ue,wa as Fe,wc as Pe,yb as ke}from"./chunk-SSCO7BOT.js";import{a as $,b as L,e as B}from"./chunk-GAL4ENT6.js";var Eo=[Xe,Ye,Ge,Ze,We];function Lr(){return ft(ht.forRoot(Eo))}function Co(e){let o=e,t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var zr=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Co];var Io="@",xo=(()=>{class e{constructor(t,r,i,s,f){this.doc=t,this.delegate=r,this.zone=i,this.animationType=s,this.moduleImpl=f,this._rendererFactoryPromise=null,this.scheduler=n(Oe,{optional:!0}),this.loadingSchedulerFn=n(To,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-SRUJE3T6.js").then(i=>i),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(t):r=t(),r.catch(i=>{throw new Te(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let f=new s(this.delegate,this._engine,this.zone);return this.delegate=f,f})}createRenderer(t,r){let i=this.delegate.createRenderer(t,r);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let s=new Bt(i);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(f=>{let S=f.createRenderer(t,r);s.use(S),this.scheduler?.notify(10)}).catch(f=>{s.use(i)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(r){Ne()}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),Bt=class{constructor(o){this.delegate=o,this.replay=[],this.\u0275type=1}use(o){if(this.delegate=o,this.replay!==null){for(let t of this.replay)t(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,t){return this.delegate.createElement(o,t)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,t){this.delegate.appendChild(o,t)}insertBefore(o,t,r,i){this.delegate.insertBefore(o,t,r,i)}removeChild(o,t,r){this.delegate.removeChild(o,t,r)}selectRootElement(o,t){return this.delegate.selectRootElement(o,t)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,t,r,i){this.delegate.setAttribute(o,t,r,i)}removeAttribute(o,t,r){this.delegate.removeAttribute(o,t,r)}addClass(o,t){this.delegate.addClass(o,t)}removeClass(o,t){this.delegate.removeClass(o,t)}setStyle(o,t,r,i){this.delegate.setStyle(o,t,r,i)}removeStyle(o,t,r){this.delegate.removeStyle(o,t,r)}setProperty(o,t,r){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(o,t,r)),this.delegate.setProperty(o,t,r)}setValue(o,t){this.delegate.setValue(o,t)}listen(o,t,r){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(o,t,r)),this.delegate.listen(o,t,r)}shouldReplay(o){return this.replay!==null&&o.startsWith(Io)}},To=new q("");function _r(e="animations"){return ke("NgAsyncAnimations"),mt([{provide:Ue,useFactory:(o,t,r)=>new xo(o,t,r,e),deps:[$e,Be,dt]},{provide:Me,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ct="PERFORM_ACTION",bo="REFRESH",Gr="RESET",Zr="ROLLBACK",Wr="COMMIT",Xr="SWEEP",Yr="TOGGLE_ACTION",wo="SET_ACTIONS_ACTIVE",Qr="JUMP_TO_STATE",qr="JUMP_TO_ACTION",ee="IMPORT_STATE",to="LOCK_CHANGES",eo="PAUSE_RECORDING",nt=class{constructor(o,t){if(this.action=o,this.timestamp=t,this.type=ct,typeof o.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Kt=class{constructor(){this.type=bo}},Ht=class{constructor(o){this.timestamp=o,this.type=Gr}},Vt=class{constructor(o){this.timestamp=o,this.type=Zr}},Jt=class{constructor(o){this.timestamp=o,this.type=Wr}},Gt=class{constructor(){this.type=Xr}},Zt=class{constructor(o){this.id=o,this.type=Yr}};var Wt=class{constructor(o){this.index=o,this.type=Qr}},Xt=class{constructor(o){this.actionId=o,this.type=qr}},Yt=class{constructor(o){this.nextLiftedState=o,this.type=ee}},Qt=class{constructor(o){this.status=o,this.type=to}},qt=class{constructor(o){this.status=o,this.type=eo}};var wt=new q("@ngrx/store-devtools Options"),Br=new q("@ngrx/store-devtools Initial Config");function ro(){return null}var Mo="NgRx Store DevTools";function No(e){let o={maxAge:!1,monitor:ro,actionSanitizer:void 0,stateSanitizer:void 0,name:Mo,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof e=="function"?e():e,r=t.logOnly?{pause:!0,export:!0,test:!0}:!1,i=t.features||r||o.features;i.import===!0&&(i.import="custom");let s=Object.assign({},o,{features:i},t);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function Kr(e,o){return e.filter(t=>o.indexOf(t)<0)}function oo(e){let{computedStates:o,currentStateIndex:t}=e;if(t>=o.length){let{state:i}=o[o.length-1];return i}let{state:r}=o[t];return r}function st(e){return new nt(e,+Date.now())}function Oo(e,o){return Object.keys(o).reduce((t,r)=>{let i=Number(r);return t[i]=io(e,o[i],i),t},{})}function io(e,o,t){return L($({},o),{action:e(o.action,t)})}function Uo(e,o){return o.map((t,r)=>({state:no(e,t.state,r),error:t.error}))}function no(e,o,t){return e(o,t)}function so(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function ko(e,o,t,r){let i=[],s={},f=[];return e.stagedActionIds.forEach((S,b)=>{let a=e.actionsById[S];a&&(b&&re(e.computedStates[b],a,o,t,r)||(s[S]=a,i.push(S),f.push(e.computedStates[b])))}),L($({},e),{stagedActionIds:i,actionsById:s,computedStates:f})}function re(e,o,t,r,i){let s=t&&!t(e,o.action),f=r&&!o.action.type.match(r.map(b=>Hr(b)).join("|")),S=i&&o.action.type.match(i.map(b=>Hr(b)).join("|"));return s||f||S}function Hr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function co(e){return{ngZone:e?n(dt):null,connectInZone:e}}var Mt=(()=>{class e extends gt{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=be(e)))(i||e)}})()}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),Tt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},te=new q("@ngrx/store-devtools Redux Devtools Extension"),ao=(()=>{class e{constructor(t,r,i){this.config=r,this.dispatcher=i,this.zoneConfig=co(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,r){if(this.devtoolsExtension)if(t.type===ct){if(r.isLocked||r.isPaused)return;let i=oo(r);if(so(this.config)&&re(i,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?no(this.config.stateSanitizer,i,r.currentStateIndex):i,f=this.config.actionSanitizer?io(this.config.actionSanitizer,t,r.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(f,s))}else{let i=L($({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?Oo(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?Uo(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new jt(t=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(i=>t.next(i)),r.unsubscribe}):ge}createActionStreams(){let t=this.createChangesObservable().pipe(Ce()),r=t.pipe(X(a=>a.type===Tt.START)),i=t.pipe(X(a=>a.type===Tt.STOP)),s=t.pipe(X(a=>a.type===Tt.DISPATCH),c(a=>this.unwrapAction(a.payload)),Se(a=>a.type===ee?this.dispatcher.pipe(X(M=>M.type===Lt),ut(1e3),Ae(1e3),c(()=>a),g(()=>d(a)),ve(1)):d(a))),S=t.pipe(X(a=>a.type===Tt.ACTION),c(a=>this.unwrapAction(a.payload))).pipe(lt(i)),b=s.pipe(lt(i));this.start$=r.pipe(lt(i)),this.actions$=this.start$.pipe(h(()=>S)),this.liftedActions$=this.start$.pipe(h(()=>b))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let r={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(r.maxAge=t.maxAge),r}sendToReduxDevtools(t){try{t()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}static{this.\u0275fac=function(r){return new(r||e)(v(te),v(wt),v(Mt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})(),bt={type:$t},jo="@ngrx/store-devtools/recompute",Po={type:jo};function po(e,o,t,r,i){if(r)return{state:t,error:"Interrupted by an error up the chain"};let s=t,f;try{s=e(t,o)}catch(S){f=S.toString(),i.handleError(S)}return{state:s,error:f}}function Ft(e,o,t,r,i,s,f,S,b){if(o>=e.length&&e.length===s.length)return e;let a=e.slice(0,o),M=s.length-(b?1:0);for(let p=o;p<M;p++){let E=s[p],R=i[E].action,A=a[p-1],y=A?A.state:r,K=A?A.error:void 0,H=f.indexOf(E)>-1?A:po(t,R,y,K,S);a.push(H)}return b&&a.push(e[e.length-1]),a}function Ro(e,o){return{monitorState:o(void 0,{}),nextActionId:1,actionsById:{0:st(bt)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Do(e,o,t,r,i={}){return s=>(f,S)=>{let{monitorState:b,actionsById:a,nextActionId:M,stagedActionIds:p,skippedActionIds:E,committedState:R,currentStateIndex:A,computedStates:y,isLocked:K,isPaused:k}=f||o;f||(a=Object.create(a));function H(F){let x=F,W=p.slice(1,x+1);for(let _=0;_<W.length;_++)if(y[_+1].error){x=_,W=p.slice(1,x+1);break}else delete a[W[_]];E=E.filter(_=>W.indexOf(_)===-1),p=[0,...p.slice(x+1)],R=y[x].state,y=y.slice(x),A=A>x?A-x:0}function V(){a={0:st(bt)},M=1,p=[0],E=[],R=y[A].state,A=0,y=[]}let C=0;switch(S.type){case to:{K=S.status,C=1/0;break}case eo:{k=S.status,k?(p=[...p,M],a[M]=new nt({type:"@ngrx/devtools/pause"},+Date.now()),M++,C=p.length-1,y=y.concat(y[y.length-1]),A===p.length-2&&A++,C=1/0):V();break}case Gr:{a={0:st(bt)},M=1,p=[0],E=[],R=e,A=0,y=[];break}case Wr:{V();break}case Zr:{a={0:st(bt)},M=1,p=[0],E=[],A=0,y=[];break}case Yr:{let{id:F}=S;E.indexOf(F)===-1?E=[F,...E]:E=E.filter(W=>W!==F),C=p.indexOf(F);break}case wo:{let{start:F,end:x,active:W}=S,_=[];for(let kt=F;kt<x;kt++)_.push(kt);W?E=Kr(E,_):E=[...E,..._],C=p.indexOf(F);break}case Qr:{A=S.index,C=1/0;break}case qr:{let F=p.indexOf(S.actionId);F!==-1&&(A=F),C=1/0;break}case Xr:{p=Kr(p,E),E=[],A=Math.min(A,p.length-1);break}case ct:{if(K)return f||o;if(k||f&&re(f.computedStates[A],S,i.predicate,i.actionsSafelist,i.actionsBlocklist)){let x=y[y.length-1];y=[...y.slice(0,-1),po(s,S.action,x.state,x.error,t)],C=1/0;break}i.maxAge&&p.length===i.maxAge&&H(1),A===p.length-1&&A++;let F=M++;a[F]=S,p=[...p,F],C=p.length-1;break}case ee:{({monitorState:b,actionsById:a,nextActionId:M,stagedActionIds:p,skippedActionIds:E,committedState:R,currentStateIndex:A,computedStates:y,isLocked:K,isPaused:k}=S.nextLiftedState);break}case $t:{C=0,i.maxAge&&p.length>i.maxAge&&(y=Ft(y,C,s,R,a,p,E,t,k),H(p.length-i.maxAge),C=1/0);break}case Lt:{if(y.filter(x=>x.error).length>0)C=0,i.maxAge&&p.length>i.maxAge&&(y=Ft(y,C,s,R,a,p,E,t,k),H(p.length-i.maxAge),C=1/0);else{if(!k&&!K){A===p.length-1&&A++;let x=M++;a[x]=new nt(S,+Date.now()),p=[...p,x],C=p.length-1,y=Ft(y,C,s,R,a,p,E,t,k)}y=y.map(x=>L($({},x),{state:s(x.state,Po)})),A=p.length-1,i.maxAge&&p.length>i.maxAge&&H(p.length-i.maxAge),C=1/0}break}default:{C=1/0;break}}return y=Ft(y,C,s,R,a,p,E,t,k),b=r(b,S),{monitorState:b,actionsById:a,nextActionId:M,stagedActionIds:p,skippedActionIds:E,committedState:R,currentStateIndex:A,computedStates:y,isLocked:K,isPaused:k}}}var Vr=(()=>{class e{constructor(t,r,i,s,f,S,b,a){let M=Ro(b,a.monitor),p=Do(b,M,S,a.monitor,a),E=Pt(Pt(r.asObservable().pipe(Ie(1)),s.actions$).pipe(c(st)),t,s.liftedActions$).pipe(ye(he)),R=i.pipe(c(p)),A=co(a.connectInZone),y=new de(1);this.liftedStateSubscription=E.pipe(xe(R),Jr(A),Ee(({state:H},[V,C])=>{let F=C(H,V);return V.type!==ct&&so(a)&&(F=ko(F,a.predicate,a.actionsSafelist,a.actionsBlocklist)),s.notify(V,F),{state:F,action:V}},{state:M,action:null})).subscribe(({state:H,action:V})=>{if(y.next(H),V.type===ct){let C=V.action;f.next(C)}}),this.extensionStartSubscription=s.start$.pipe(Jr(A)).subscribe(()=>{this.refresh()});let K=y.asObservable(),k=K.pipe(c(oo));Object.defineProperty(k,"state",{value:er(k,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=K,this.state=k}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new nt(t,+Date.now()))}refresh(){this.dispatch(new Kt)}reset(){this.dispatch(new Ht(+Date.now()))}rollback(){this.dispatch(new Vt(+Date.now()))}commit(){this.dispatch(new Jt(+Date.now()))}sweep(){this.dispatch(new Gt)}toggleAction(t){this.dispatch(new Zt(t))}jumpToAction(t){this.dispatch(new Xt(t))}jumpToState(t){this.dispatch(new Wt(t))}importState(t){this.dispatch(new Yt(t))}lockChanges(t){this.dispatch(new Qt(t))}pauseRecording(t){this.dispatch(new qt(t))}static{this.\u0275fac=function(r){return new(r||e)(v(Mt),v(gt),v(or),v(ao),v(nr),v(we),v(rr),v(wt))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})();function Jr({ngZone:e,connectInZone:o}){return t=>o?new jt(r=>t.subscribe({next:i=>e.run(()=>r.next(i)),error:i=>e.run(()=>r.error(i)),complete:()=>e.run(()=>r.complete())})):t}var $o=new q("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Lo(e,o){return!!e||o.monitor!==ro}function zo(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function _o(e){return e.state}function uo(e={}){return mt([ao,Mt,Vr,{provide:Br,useValue:e},{provide:$o,deps:[te,wt],useFactory:Lo},{provide:te,useFactory:zo},{provide:wt,deps:[Br],useFactory:No},{provide:sr,deps:[Vr],useFactory:_o},{provide:ir,useExisting:Mt}])}var lo=[{path:"",pathMatch:"full",redirectTo:"global-feed"},{path:"",loadChildren:()=>import("./chunk-F2NWVQSI.js").then(e=>e.innerPageRoutes)},{path:"sp",loadChildren:()=>import("./chunk-WN5MPZYK.js").then(e=>e.singlePageRoutes)}];var oe={};B(oe,{getFeedEffect:()=>Bo});var mo=(()=>{class e{constructor(t){this.http=t}getFeed(t){let r=I.apiUrl+t;return this.http.get(r)}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Bo=u((e=n(l),o=n(mo),t=n(xt))=>e.pipe(m(Et.getFeed),h(({url:r})=>o.getFeed(r).pipe(ut(60*1e3),c(i=>{let s=i.articles.length===0;return Et.getFeedSuccess({feed:i,isLastPage:s})}),g(i=>(console.error("Request timed out or failed:",i),t.error("Server Error.","Our free-tier cloud server temporarily paused due to inactivity. Please wait a moment while we reconnect\u2014this usually takes about a minute.",{nzDuration:1e4}),d(Et.getFeedFailure())))))),{functional:!0});var ie={};B(ie,{getCurrentUserEffect:()=>Ko,loginEffect:()=>Jo,logoutEffect:()=>Xo,notifUpdateCurrentUser:()=>Wo,redirectAfterLoginEffect:()=>Go,redirectAfterRegisterEffect:()=>Vo,registerEffect:()=>Ho,updateCurrentUserEffect:()=>Zo});var Ko=u((e=n(l),o=n(it),t=n(et))=>e.pipe(m(w.getCurrentUser),h(()=>t.get("BVaccessToken")?o.getCurrentUser().pipe(c(i=>w.getCurrentUserSuccess({currentUser:i})),g(i=>(i?.status==401&&localStorage.removeItem("BVaccessToken"),d(w.getCurrentUserFailure())))):d(w.getCurrentUserFailure()))),{functional:!0}),Ho=u((e=n(l),o=n(it),t=n(et))=>e.pipe(m(w.register),h(({request:r})=>o.register(r).pipe(c(i=>(t.set("BVaccessToken",i.token),w.registerSuccess({currentUser:i}))),g(i=>d(w.registerFailure({errors:i.error.errors})))))),{functional:!0}),Vo=u((e=n(l),o=n(J))=>e.pipe(m(w.registerSuccess),j(()=>{o.navigateByUrl("/")})),{functional:!0,dispatch:!1}),Jo=u((e=n(l),o=n(it),t=n(et))=>e.pipe(m(w.login),h(({request:r})=>o.login(r).pipe(c(i=>(t.set("BVaccessToken",i.token),w.loginSuccess({currentUser:i}))),g(i=>d(w.loginFailure({errors:i.error.error})))))),{functional:!0}),Go=u((e=n(l),o=n(J))=>e.pipe(m(w.loginSuccess),j(()=>{o.navigateByUrl("/")})),{functional:!0,dispatch:!1}),Zo=u((e=n(l),o=n(it))=>e.pipe(m(w.updateCurrentUser),h(({currentUserRequest:t,filename:r})=>o.updateCurrentUser(t,r).pipe(c(i=>w.updateCurrentUserSuccess({currentUser:i})),g(i=>d(w.updateCurrentUserFailure({errors:i.error.errors})))))),{functional:!0}),Wo=u((e=n(l),o=n(At))=>e.pipe(m(w.updateCurrentUserSuccess),j(()=>o.success("Profile updated successfully."))),{functional:!0,dispatch:!1}),Xo=u((e=n(l),o=n(J),t=n(et),r=n(it))=>e.pipe(m(w.logout),j(()=>{r.logout().subscribe(),t.set("BVaccessToken",""),o.navigateByUrl("/sp/login")})),{functional:!0,dispatch:!1});var ne={};B(ne,{createArticleEffect:()=>Qo,deleteArticleEffect:()=>ri,getArticleEffect:()=>Yo,redirectAfterCreateEffect:()=>qo,redirectAfterUpdateEffect:()=>ei,showErrorNotifArticleEffect:()=>ii,showSuccessModalAfterDeleteEffect:()=>oi,updateArticleEffect:()=>ti});var at=(()=>{class e{constructor(t){this.http=t}getArticle(t){let r=`${I.apiUrl}/articles/${t}`;return this.http.get(r).pipe(c(i=>i.article))}createArticle(t){let r=I.apiUrl+"/articles",i=new FormData;return i.append("article[title]",t.article.title),i.append("article[description]",t.article.description),i.append("article[body]",t.article.body),t.article.tagList.forEach((s,f)=>{i.append(`article[tagList][${f}]`,s)}),t.article?.images?.forEach(s=>{i.append("images",s.originFileObj)}),this.http.post(r,i).pipe(c(s=>s.article))}updateArticle(t,r){let i=`${I.apiUrl}/articles/${t}`,s=new FormData;return s.append("article[title]",r.article.title),s.append("article[description]",r.article.description),s.append("article[body]",r.article.body),r.article.tagList.forEach((f,S)=>{s.append(`article[tagList][${S}]`,f)}),r.article?.images?.forEach(f=>{f?.originFileObj?s.append("images",f.originFileObj):s.append("images",JSON.stringify(f))}),this.http.put(i,s).pipe(c(f=>f.article))}deleteArticle(t){let r=`${I.apiUrl}/articles/${t}`;return this.http.delete(r)}commentArticle(t){let r=t.comment.slug,i=`${I.apiUrl}/articles/${r}/comments`;return this.http.post(i,t)}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Yo=u((e=n(l),o=n(at))=>e.pipe(m(N.getArticle),h(({slug:t})=>o.getArticle(t).pipe(c(r=>N.getArticleSuccess({article:r})),g(()=>d(N.getArticleFailure()))))),{functional:!0}),Qo=u((e=n(l),o=n(at))=>e.pipe(m(N.createArticle),h(({request:t})=>o.createArticle(t).pipe(c(r=>N.createArticleSuccess({article:r})),g(r=>d(N.createArticleFailure({errors:r.error.errors})))))),{functional:!0}),qo=u((e=n(l),o=n(J))=>e.pipe(m(N.createArticleSuccess),j(({article:t})=>{o.navigate(["/articles",t.slug])})),{functional:!0,dispatch:!1}),ti=u((e=n(l),o=n(at))=>e.pipe(m(N.updateArticle),h(({request:t,slug:r})=>o.updateArticle(r,t).pipe(c(i=>N.updateArticleSuccess({article:i})),g(i=>d(N.updateArticleFailure({errors:i.error.errors})))))),{functional:!0}),ei=u((e=n(l),o=n(J),t=n(Y),r=n(At))=>e.pipe(m(N.updateArticleSuccess),j(({article:i})=>{t.dispatch(Cr.toggleDrawerClose()),r.success("Article updated successfully."),setTimeout(()=>{location.reload()},1e3)})),{functional:!0,dispatch:!1}),ri=u((e=n(l),o=n(at))=>e.pipe(m(N.deleteArticle),h(({slug:t})=>o.deleteArticle(t).pipe(c(()=>N.deleteArticleSuccess()),g(()=>d(N.deleteArticleFailure()))))),{functional:!0}),oi=u((e=n(l),o=n(J),t=n(yt))=>e.pipe(m(N.deleteArticleSuccess),j(()=>{let r=t.success({nzTitle:"Article was successfully deleted!"});setTimeout(()=>{r.destroy(),o.navigateByUrl("/")},2e3)})),{functional:!0,dispatch:!1}),ii=u((e=n(l),o=n(xt))=>e.pipe(m(N.createArticleFailure),j(({errors:t})=>{let r=Object.keys(t)[1],i=t[r].toString();if(t&&typeof t=="object"){let f=Object.keys(t)[1];o.error("Error Article",i,{nzDuration:3e3,nzPlacement:"topLeft"})}else console.warn("No errors object found")})),{functional:!0,dispatch:!1});var se={};B(se,{getPopularTagsEffect:()=>ni});var fo=(()=>{class e{constructor(t){this.http=t}getPopularTags(){let t=I.apiUrl+"/tags";return this.http.get(t).pipe(c(r=>r.data))}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ni=u((e=n(l),o=n(fo))=>e.pipe(m(St.getPopularTags),h(()=>o.getPopularTags().pipe(c(t=>St.getPopularTagsSuccess({popularTags:t})),g(()=>d(St.getPopularTagsFailure()))))),{functional:!0});var ce={};B(ce,{addToFavoritesEffect:()=>si});var Nt=(()=>{class e{constructor(t){this.http=t}addToFavorites(t){let r=this.getUrl(t);return this.http.post(r,{}).pipe(c(this.getArticle))}removeFromFavorites(t){let r=this.getUrl(t);return this.http.delete(r).pipe(c(this.getArticle))}getUrl(t){return`${I.apiUrl}/articles/${t}/favorite`}getArticle(t){return t.article}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})();var si=u((e=n(l),o=n(Nt))=>e.pipe(m(vt.addToFavorites),h(({isFavorited:t,slug:r})=>(t?o.removeFromFavorites(r):o.addToFavorites(r)).pipe(c(s=>vt.addToFavoritesSuccess({article:s})),g(()=>d(vt.addToFavoritesFailure()))))),{functional:!0});var ae={};B(ae,{getUserProfileEffect:()=>ci});var Ot=(()=>{class e{constructor(t){this.http=t}getUserProfile(t){let r=`${I.apiUrl}/profiles/${t}`;return this.http.get(r).pipe(c(i=>i.profile))}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})();var ci=u((e=n(l),o=n(Ot))=>e.pipe(m(Ct.getUserProfile),h(({username:t})=>o.getUserProfile(t).pipe(c(r=>Ct.getUserProfileSuccess({userProfile:r})),g(()=>d(Ct.getUserProfileFailure()))))),{functional:!0});var pe={};B(pe,{followUserEffect:()=>ai});var Ut=(()=>{class e{constructor(t){this.http=t}followUser(t){let r=this.getUrl(t);return this.http.post(r,[]).pipe(c(i=>i.profile))}unFollowUser(t){let r=this.getUrl(t);return this.http.delete(r).pipe(c(i=>i.profile))}getUrl(t){return`${I.apiUrl}/profiles/${t}/follow`}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ai=u((e=n(l),o=n(Ut))=>e.pipe(m(It.followUser),h(({isFollowing:t,username:r})=>(t?o.unFollowUser(r):o.followUser(r)).pipe(c(s=>It.followUserSuccess({profile:s})),g(()=>d(It.followUserFailure()))))),{functional:!0});var ue={};B(ue,{commentEffect:()=>ui,deleteCommentEffect:()=>mi,getCommentsEffect:()=>pi,reloadAfterCommentEffect:()=>fi,updateCommentEffect:()=>li});var ot=(()=>{class e{constructor(t){this.http=t}commentArticle(t){let r=t.comment.slug,i=`${I.apiUrl}/articles/${r}/comment`;return this.http.post(i,t)}getComments(t,r){let i=`${I.apiUrl}/articles/${r}/comments`,s={articleId:t};return this.http.get(i,{params:s})}updateComment(t){let r=t.comment.slug,i=`${I.apiUrl}/articles/${r}/comment`;return this.http.patch(i,t)}deleteComment(t,r){let i=`${I.apiUrl}/articles/${r}/comment/${t}`;return this.http.delete(i)}getUrl(t){return`${I.apiUrl}/articles/${t}`}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})();var pi=u((e=n(l),o=n(ot))=>e.pipe(m(U.getComment),h(({articleId:t,slug:r})=>o.getComments(t,r).pipe(c(i=>U.getCommentSuccess({data:i})),g(()=>d(U.getCommentFailure()))))),{functional:!0}),ui=u((e=n(l),o=n(ot))=>e.pipe(m(U.commentArticle),h(({request:t})=>o.commentArticle(t).pipe(c(r=>U.commentArticleSuccess({comment:r})),g(r=>d(U.commentArticleFailure({errors:r.error.errors})))))),{functional:!0}),li=u((e=n(l),o=n(ot))=>e.pipe(m(U.updateCommentArticle),h(({request:t})=>o.updateComment(t).pipe(c(r=>U.updateCommentArticleSuccess({comment:r})),g(r=>d(U.commentArticleFailure({errors:r.error.errors})))))),{functional:!0}),mi=u((e=n(l),o=n(ot))=>e.pipe(m(U.deleteComment),h(({commentId:t,slug:r})=>o.deleteComment(t,r).pipe(c(i=>U.deleteCommentSuccess({comment:i})),g(i=>d(U.deleteCommentFailure()))))),{functional:!0}),fi=u((e=n(l),o=n(Y))=>e.pipe(m(U.commentArticleSuccess,U.deleteCommentSuccess),j(({comment:t})=>{o.dispatch(U.getComment({articleId:t.article_id,slug:t.slug}))})),{functional:!0,dispatch:!1});var le={};B(le,{dislikeCommentEffect:()=>hi,likeCommentEffect:()=>di});var pt=(()=>{class e{constructor(t){this.http=t}likeComment(t){let{slug:r}=t,i=this.getUrl(r)+"/like-comment";return this.http.post(i,t).pipe(c(this.getLikeResponse))}dislikeComment(t){let{slug:r}=t,i=this.getUrl(r)+"/dislike-comment";return this.http.post(i,t).pipe(c(this.getLikeResponse))}getUrl(t){return`${I.apiUrl}/articles/${t}`}getLikeResponse(t){return t}static{this.\u0275fac=function(r){return new(r||e)(v(O))}}static{this.\u0275prov=T({token:e,factory:e.\u0275fac})}}return e})();var di=u((e=n(l),o=n(pt))=>e.pipe(m(P.likeComment),h(({request:t})=>o.likeComment(t).pipe(c(i=>P.likeCommentSuccess({data:i})),g(()=>d(P.likeCommentFailure()))))),{functional:!0}),hi=u((e=n(l),o=n(pt))=>e.pipe(m(P.dislikeComment),h(({request:t})=>o.dislikeComment(t).pipe(c(i=>P.dislikeCommentSuccess({data:i})),g(()=>d(P.dislikeCommentFailure()))))),{functional:!0});var me={};B(me,{clearNotificationsEffect:()=>yi,getNotificationCountEffect:()=>gi});var gi=u((e=n(l),o=n(G))=>e.pipe(m(tt.getNotificationCount),h(()=>o.getNotificationBadge().pipe(c(t=>tt.getNotificationCountSuccess({data:t})),g(()=>d(tt.getNotificationCountFailure()))))),{functional:!0}),yi=u((e=n(l),o=n(J),t=n(Y))=>e.pipe(m(z.clearNotifications),j(()=>{t.dispatch(tt.resetNotificationCount())})),{functional:!0,dispatch:!1});var fe={};B(fe,{clearUserNotifications:()=>vi,getUserNotificationsEffect:()=>Si,getUserNotificationsLoadMoreEffect:()=>Ai});var Si=u((e=n(l),o=n(G))=>e.pipe(m(z.getNotifications),h(({limit:t,offset:r})=>o.getUserNotifications(t,r).pipe(c(i=>z.getNotificationsSuccess({data:i})),g(()=>d(z.getNotificationsFailure()))))),{functional:!0}),Ai=u((e=n(l),o=n(G))=>e.pipe(m(z.getNotificationsLoadMore),h(({limit:t,offset:r})=>o.getUserNotifications(t,r).pipe(c(i=>z.getNotificationsLoadMoreSuccess({data:i})),g(()=>d(z.getNotificationsLoadMoreFailure()))))),{functional:!0}),vi=u((e=n(l),o=n(G))=>e.pipe(m(z.clearNotifications),h(()=>o.clearUserNotifications().pipe(c(t=>z.clearNotificationsSuccess({data:t?.data,message:t?.message})),g(()=>d(z.clearNotificationsFailure()))))),{functional:!0});var ho=(e,o)=>{let r=n(et).get("BVaccessToken");return e=e.clone({setHeaders:{Authorization:r?`Bearer ${r}`:""}}),o(e)};var go={isLoading:!1,error:null,data:[]},Ei=ar({name:"react comment",reducer:ur(go,Q(P.likeComment,e=>L($({},e),{isLoading:!0})),Q(P.likeCommentSuccess,(e,o)=>L($({},e),{isLoading:!1,data:o})),Q(P.likeCommentFailure,e=>L($({},e),{isLoading:!1})),Q(P.dislikeComment,e=>L($({},e),{isLoading:!0})),Q(P.dislikeCommentSuccess,(e,o)=>L($({},e),{isLoading:!1,data:o})),Q(P.dislikeCommentFailure,e=>L($({},e),{isLoading:!1})),Q(lr,()=>go))}),{name:yo,reducer:So,selectIsLoading:Ps,selectError:Rs,selectData:Ds}=Ei;Le(zr);var Ao={providers:[Dt(_e([ho])),Re({eventCoalescing:!0}),Ve(lo,Je({onSameUrlNavigation:"ignore"})),pr({router:mr}),fr(),D(yr,Sr),D(Ur,kr),D(Fr,br),D(Ir,xr),D(wr,Mr),D(Pr,Rr),D(zt,_t),D(zt,_t),D(Nr,Or),D(yo,So),D(vr,Er),D(Dr,$r),dr(ie,oe,ne,se,ce,ae,pe,ue,le,me,fe),Lr(),qe(Qe),ft(tr),_r(),Dt(),uo({maxAge:25,logOnly:!De(),autoPause:!0,trace:!1,traceLimit:75}),Tr,Nt,Ot,Ut,yt,ot,pt,G,jr]};var vo=(()=>{class e{constructor(t,r){this.store=t,this.notificationService=r,this.isCollapsed=!1}ngOnInit(){this.store.dispatch(w.getCurrentUser()),this.store.dispatch(tt.getNotificationCount()),this.currentUserSubscription=this.store.pipe(cr(Ar),X(Boolean)).subscribe(t=>{let r=t.id;this.notificationService.registerUser(r),this.notificationService.listenForNotifications(t.username)})}ngOnDestroy(){this.currentUserSubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(Rt(Y),Rt(G))}}static{this.\u0275cmp=Fe({type:e,selectors:[["app-root"]],standalone:!0,features:[Pe],decls:1,vars:0,template:function(r,i){r&1&&je(0,"router-outlet")},dependencies:[ze,He,ht,gr,hr]})}}return e})();Ke(vo,Ao).catch(e=>console.error(e));
